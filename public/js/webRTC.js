/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 7);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./resources/js/webRTC.js":
/*!********************************!*\
  !*** ./resources/js/webRTC.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*\n *  Copyright (c) 2015 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nvar socket = io('https://rtcserver.esuccess-inc.com:40002', {});\nvar peer = new Peer({\n  initiator: false,\n  trickle: false\n});\n'use strict';\n\nvar myVideoStream;\nvar myAudioStream;\nvar videoElement;\nvar audioElement;\nvar sharedScreen = false;\nvar peerConnections = {};\nvar mediaContainer = document.getElementById('myMediaContainer');\nvar videoGrid = document.getElementById('videoGrid');\nvar audioInputSelect = document.querySelector('select#audioSource');\nvar audioOutputSelect = document.querySelector('select#audioOutput');\nvar videoSelect = document.querySelector('select#videoSource');\nvar selectors = [audioInputSelect, audioOutputSelect, videoSelect];\naudioOutputSelect.disabled = !('sinkId' in HTMLMediaElement.prototype);\n\nfunction gotDevices(deviceInfos) {\n  // Handles being called several times to update labels. Preserve values.\n  var values = selectors.map(function (select) {\n    return select.value;\n  });\n  selectors.forEach(function (select) {\n    while (select.firstChild) {\n      select.removeChild(select.firstChild);\n    }\n  });\n\n  for (var i = 0; i !== deviceInfos.length; ++i) {\n    var deviceInfo = deviceInfos[i];\n    var option = document.createElement('option');\n    option.value = deviceInfo.deviceId;\n\n    if (deviceInfo.kind === 'audioinput') {\n      option.text = deviceInfo.label || \"microphone \".concat(audioInputSelect.length + 1);\n      audioInputSelect.appendChild(option);\n    } else if (deviceInfo.kind === 'audiooutput') {\n      option.text = deviceInfo.label || \"speaker \".concat(audioOutputSelect.length + 1);\n      audioOutputSelect.appendChild(option);\n    } else if (deviceInfo.kind === 'videoinput') {\n      option.text = deviceInfo.label || \"camera \".concat(videoSelect.length + 1);\n      videoSelect.appendChild(option);\n    } else {\n      console.log('Some other kind of source/device: ', deviceInfo);\n    }\n  }\n\n  selectors.forEach(function (select, selectorIndex) {\n    if (Array.prototype.slice.call(select.childNodes).some(function (n) {\n      return n.value === values[selectorIndex];\n    })) {\n      select.value = values[selectorIndex];\n    }\n  });\n}\n\nnavigator.mediaDevices.enumerateDevices().then(gotDevices)[\"catch\"](handleError); // Attach audio output device to video element using device/sink ID.\n\nfunction attachSinkId(element, sinkId) {\n  //(mute element, feedback if false)\n  element.muted = true;\n\n  if (typeof element.sinkId !== 'undefined') {\n    element.setSinkId(sinkId).then(function () {\n      console.log(\"Success, audio output device attached: \".concat(sinkId));\n    })[\"catch\"](function (error) {\n      var errorMessage = error;\n\n      if (error.name === 'SecurityError') {\n        errorMessage = \"You need to use HTTPS for selecting audio output device: \".concat(error);\n      }\n\n      console.error(errorMessage); // Jump back to first output device in the list as it's the default.\n\n      audioOutputSelect.selectedIndex = 0;\n    });\n  } else {\n    console.warn('Browser does not support output device selection.');\n  }\n}\n\nfunction changeAudioDestination() {\n  var audioDestination = audioOutputSelect.value;\n\n  if (myVideoStream) {\n    attachSinkId(videoElement, audioDestination);\n  } else {\n    attachSinkId(audioElement, audioDestination);\n  }\n}\n\nfunction gotStream(stream) {\n  window.stream = stream; // make stream available to console\n\n  videoElement.srcObject = stream; //Register the video stream to my Stream\n\n  myVideoStream = stream; // Refresh button list in case labels have become available\n\n  return navigator.mediaDevices.enumerateDevices();\n}\n\nfunction handleError(error) {\n  //start a video with audio connection width data of user\n  var video = false;\n  var audio = true; //start audio\n\n  data = {\n    'id': myId,\n    'user': user,\n    'roomID': roomID\n  };\n  start(video, audio, data);\n}\n\nfunction addMyAudio(audio, stream) {\n  audio.srcObject = stream;\n  audio.muted = true;\n  audio.addEventListener('loadedmetadata', function () {\n    audio.play();\n  });\n  mediaContainer.append(audio);\n}\n\nfunction addMyVideo(video, stream) {\n  video.srcObject = stream;\n  video.muted = true;\n  video.addEventListener('loadedmetadata', function () {\n    video.play();\n  });\n  mediaContainer.append(video);\n}\n\nfunction addAudio(audio, stream) {\n  audio.srcObject = stream;\n  audio.addEventListener('loadedmetadata', function () {\n    audio.play();\n  });\n  videoGrid.append(audio);\n}\n\nfunction addVideo(video, stream) {\n  video.srcObject = stream;\n  video.addEventListener('loadedmetadata', function () {\n    video.play();\n  });\n  videoGrid.append(video);\n}\n\nfunction addVideoContent(containerID, video, stream) {\n  video.srcObject = stream;\n  video.addEventListener('loadedmetadata', function () {\n    video.play();\n  });\n  var containerElement = document.getElementById(containerID);\n\n  if (containerElement) {\n    containerElement.append(video);\n  }\n}\n\nfunction showByElementId(elementID) {\n  var el = document.getElementById(elementID);\n\n  if (el) {\n    el.style.display = 'block';\n  }\n}\n\nfunction hideByElementId(elementID) {\n  var el = document.getElementById(elementID);\n\n  if (el) {\n    el.style.display = 'none';\n  }\n}\n\nfunction removeElementByID(id) {\n  var element = document.getElementById(id);\n\n  if (element) {\n    element.remove();\n  }\n}\n\nfunction createUserMedia(video, audio, constraints) {\n  navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n    removeElementByID(\"myVideo\");\n    removeElementByID(\"myAudio\");\n\n    if (audio == true && video == true) {\n      myAudioStream = null; //Register the video stream to my Stream\n\n      myVideoStream = stream;\n      window.stream = stream; // make stream available to console       \n\n      console.log(\"this is a video\");\n      /*******\n          (NOTE: THIS SHOULD BE MUTED = TRUE) \n      *******/\n\n      videoElement = document.createElement('video');\n      videoElement.setAttribute(\"id\", \"myVideo\");\n      videoElement.muted = false; //videoElement.muted = true;\n\n      addMyVideo(videoElement, stream); // detectDesktopShared(stream)\n    } else {\n      //Register the video stream to my Stream\n      myVideoStream = null;\n      window.stream = stream; // make stream available to console       \n      //add to my audio stream\n\n      myAudioStream = stream;\n      console.log(\"this is a audio only\");\n      /*******\n          (NOTE: THIS SHOULD BE MUTED = TRUE) \n      *******/\n\n      audioElement = document.createElement('audio');\n      audioElement.setAttribute(\"id\", \"myAudio\");\n      audioElement.setAttribute(\"controls\", \"controls\"); //audioElement.muted = false;\n\n      audioElement.muted = true;\n      addMyAudio(audioElement, stream); // detectDesktopShared(stream)\n    }\n\n    return navigator.mediaDevices.enumerateDevices();\n  }).then(gotDevices)[\"catch\"](function (err) {\n    if (video == true && audio == true) {\n      handleError(err);\n    } else {//alert(\"no media detected, please connect and try again\")\n    }\n  });\n}\n\nfunction start(video, audio, data) {\n  if (window.stream) {\n    window.stream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n\n  if (video == true && audio == true) {\n    var constraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: {\n        deviceId: videoSource ? {\n          exact: videoSource\n        } : undefined\n      }\n    };\n    console.log(\"connect video : start\");\n    createUserMedia(video, audio, constraints);\n  } else if (video == false && audio == true) {\n    var _constraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    console.log(\"connect audio : start\");\n    createUserMedia(video, audio, _constraints);\n  } else {//alert(\"no media detected, please connect and try again\")\n  }\n}\n\nfunction restart() {\n  if (window.stream) {\n    window.stream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n    console.log(\"restarted\");\n    window.stream = stream; // make stream available to console\n\n    videoElement.srcObject = stream; //console.log(\"i have muted this\")\n    //videoElement.muted = true;\n    //Register the video stream to my Stream\n\n    myVideoStream = stream;\n    data = {\n      'id': myId,\n      'user': user,\n      'roomID': roomID,\n      'videoStream': myVideoStream\n    };\n    socket.emit(\"changeMedia\", data);\n    removeElementByID(myId);\n  })[\"catch\"](handleError);\n} //user end stop sharing\n\n\nfunction stopSharing() {\n  var showElement = document.getElementById(\"lessonSlide\");\n\n  if (showElement) {\n    showElement.style.display = 'block';\n  }\n\n  var removeElement = document.getElementById(\"sharedVideo\");\n\n  if (removeElement) {\n    removeElement.remove();\n  }\n}\n\nfunction detectDesktopShared(stream) {\n  peer.on('connection', function (conn) {\n    conn.on('data', function (data) {\n      if (data.sharedScreen == true) {\n        //@toto peer.stream to wait for the\n        sharedScreen = true;\n      } else if (data.sharedScreen == false) {\n        stopSharing();\n        sharedScreen = false;\n        return false;\n      } else {\n        alert(\"the stream data\");\n      }\n    });\n  });\n  peer.on('close', function (conn) {\n    console.log(\"close\");\n  });\n  peer.on('call', function (call) {\n    if (stream == null) {\n      console.log(\"answer the stream without any stream\", call);\n      call.answer();\n    } else {\n      console.log(\"answer the stream\", stream);\n      call.answer(stream);\n\n      if (stream.getAudioTracks().length == 1 && stream.getVideoTracks().length == 1) {\n        alert(\"reciever from sender is a video 11-25 :: (peer)\" + call.peer);\n        removeElementByID(call.peer);\n        callerElement = document.createElement('video');\n        callerElement.setAttribute(\"id\", call.peer);\n        callerElement.setAttribute(\"class\", \"peerCallBackVideo\");\n        callerElement.muted = false;\n        addVideo(callerElement, stream);\n      } else {\n        alert(\"reciever from sender is a audio 22-25 :: (peer)\" + call.peer);\n        removeElementByID(call.peer);\n        callerElement = document.createElement('audio');\n        callerElement.setAttribute(\"id\", call.peer);\n        callerElement.setAttribute(\"class\", \"peerCallBackAudio\"); //call peer\n\n        callerElement.setAttribute(\"controls\", \"controls\");\n        callerElement.muted = false;\n        addAudio(callerElement, stream);\n      }\n    }\n\n    call.on('stream', function (userStream) {\n      if (sharedScreen == true) {\n        sharedVid = document.createElement('video');\n        sharedVid.setAttribute(\"id\", \"sharedVideo\"); //the lesson shared container must be on the member lesson slider component\n\n        addVideoContent('lessonSharedContainer', sharedVid, userStream); //hide lesson Slide\n\n        hideByElementId(\"lessonSlide\");\n      } else {\n        //the user did not\n        alert(\"user video \");\n        data = {\n          'id': myId,\n          'user': user,\n          'roomID': roomID,\n          'videoStream': mediaCallStream\n        };\n        socket.emit(\"changeMedia\", data);\n      }\n    });\n    call.on('finish', function () {\n      console.log(\"called finish\");\n    });\n    call.on('error', function (err) {\n      alert(err);\n    });\n    call.on(\"close\", function () {\n      alert(\"closed shared\");\n      sharedVid.remove();\n    });\n  });\n}\n\n;\n\nfunction shareScreen() {\n  navigator.mediaDevices.getDisplayMedia({\n    video: true,\n    audio: true\n  }).then(function (userStream) {\n    sharedScreen = userStream; //@todo: (hide slide then show the user shared)\n\n    var sharedVid = document.createElement('video');\n    sharedVid.setAttribute(\"id\", \"sharedVideo\");\n    sharedVid.muted = false; //the lesson shared container must be on the member lesson slider component\n\n    addVideoContent('lessonSharedContainer', sharedVid, userStream); //hide lesson Slide\n\n    hideByElementId(\"lessonSlide\");\n    console.log(peerConnections); //Connect to peers\n\n    Object.keys(peerConnections).forEach(function (peerID) {\n      //connect and send\n      var conn = peer.connect(peerID);\n      conn.on('open', function () {\n        /*********************               \n            (NEW) share screen data\n        *************************/\n        var data = {\n          'id': peerID,\n          'sharedScreen': true\n        }; //add to the connection, and send then call\n\n        conn.send(data);\n        var sharingScreen = peer.call(peerID, sharedScreen);\n      });\n    }); //The screen record is stopped by myself\n\n    sharedScreen.getVideoTracks()[0].onended = function () {\n      showByElementId(\"lessonSlide\");\n      document.getElementById(\"sharedVideo\").remove(); //send this shared screen false to stop peer\n\n      Object.keys(peerConnections).forEach(function (peerID) {\n        var conn = peer.connect(peerID);\n        conn.on('open', function () {\n          /*********************               \n              (STOP SHARE) share screen data\n          *************************/\n          var data = {\n            'id': peerID,\n            'sharedScreen': false\n          };\n          conn.send(data);\n        });\n      });\n    }; //socket.emit(\"userShare\", roomID, sharedScreen);\n\n  });\n}\n\naudioInputSelect.onchange = restart;\naudioOutputSelect.onchange = changeAudioDestination;\nvideoSelect.onchange = restart;\npeer.on('connection', function (conn) {\n  conn.on('data', function (data) {\n    console.log(\"peer connected\", data);\n\n    if (data.sharedScreen == true) {\n      sharedScreen = true;\n    } else if (data.sharedScreen == false) {\n      stopSharing();\n      sharedScreen = false;\n      return false;\n    } else {\n      alert(\"the stream data\");\n    }\n  });\n  conn.on('close', function (conn) {\n    console.log(\"connection of peer has been closed\", conn);\n  });\n});\npeer.on('open', function (id) {\n  console.log(\"my peer id\" + id);\n  console.log(\"my user \", user);\n  console.log(\"my room id \", roomID);\n  myId = id;\n  data = {\n    'id': id,\n    'user': user,\n    'roomID': roomID\n  };\n  socket.emit(\"newUser\", data); //start a video with audio connection width data of user\n\n  var video = true;\n  var audio = true; //start the my own video camera\n\n  start(video, audio, data);\n});\npeer.on('call', function (call) {\n  var ctr = 0;\n  console.log(\"PEER:: CALLING... for a video stream or audio stream ...\");\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n    if (stream.getAudioTracks().length == 1 && stream.getVideoTracks().length == 1) {//alert(\"stream from sender is a video 1\")\n    } else {//alert(\"stream from sender is a audio 2\")\n    }\n\n    call.answer(stream);\n    call.on('stream', function (userStream) {\n      peerConnections[call.peer] = call;\n      console.log(\"recieve video from initiator \", call);\n\n      if (ctr == 0) {\n        if (sharedScreen == true) {\n          sharedVid = document.createElement('video');\n          sharedVid.setAttribute(\"id\", \"sharedVideo\"); //the lesson shared container must be on the member lesson slider component\n\n          addVideoContent('lessonSharedContainer', sharedVid, userStream); //hide lesson Slide\n\n          hideByElementId(\"lessonSlide\");\n          return false;\n        }\n\n        if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n          //alert(\"reciever from sender is a video 5 :: (peer)\" + call.peer)\n          removeElementByID(call.peer);\n          callerElement = document.createElement('video');\n          callerElement.setAttribute(\"id\", call.peer);\n          callerElement.setAttribute(\"class\", \"peerCallBackVideo\");\n          callerElement.muted = false;\n          addVideo(callerElement, userStream);\n        } else {\n          //alert(\"reciever from sender is a audio 6 :: (peer)\" + call.peer)\n          removeElementByID(call.peer);\n          callerElement = document.createElement('audio');\n          callerElement.setAttribute(\"id\", call.peer);\n          callerElement.setAttribute(\"class\", \"peerCallBackAudio\"); //call peer\n\n          callerElement.setAttribute(\"controls\", \"controls\");\n          callerElement.muted = false;\n          addAudio(callerElement, userStream);\n        }\n      }\n\n      ctr++;\n    });\n    call.on('close', function () {\n      removeElementByID(call.peer);\n      console.log(\"user disconected\");\n    });\n  })[\"catch\"](function (error) {\n    console.log(\"recieve audio from initiator\", call);\n    var audioSource = audioInputSelect.value;\n    var constraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n      if (stream.getAudioTracks().length == 1 && stream.getVideoTracks().length == 1) {//alert(\"stream from sender is a video 3\")\n      } else {//alert(\"stream from sender is a audio 4\")\n      }\n\n      call.answer(stream);\n      call.on('stream', function (userStream) {\n        peerConnections[call.peer] = call;\n\n        if (ctr == 0) {\n          if (sharedScreen == true) {\n            sharedVid = document.createElement('video');\n            sharedVid.setAttribute(\"id\", \"sharedVideo\"); //the lesson shared container must be on the member lesson slider component\n\n            addVideoContent('lessonSharedContainer', sharedVid, userStream); //hide lesson Slide\n\n            hideByElementId(\"lessonSlide\");\n            return false;\n          }\n\n          if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n            //alert(\"reciever from sender is a video 7  :: (peer) \" + call.peer)\n            removeElementByID(call.peer);\n            callerElement = document.createElement('video');\n            callerElement.setAttribute(\"id\", call.peer);\n            callerElement.setAttribute(\"class\", \"peerCallBackVideo\");\n            callerElement.muted = false;\n            addVideo(callerElement, userStream);\n          } else {\n            //alert(\"reciever from sender is a audio 8 :: (peer)\" + call.peer)\n            removeElementByID(call.peer);\n            callerElement = document.createElement('audio');\n            callerElement.setAttribute(\"id\", call.peer);\n            callerElement.setAttribute(\"class\", \"peerCallBackAudio\"); //call peer\n\n            callerElement.setAttribute(\"controls\", \"controls\");\n            callerElement.muted = false;\n            addAudio(callerElement, userStream);\n          }\n        }\n\n        ctr++;\n      });\n      call.on('close', function () {\n        removeElementByID(call.peer);\n        console.log(\"user disconected\");\n      });\n    })[\"catch\"](function (error) {//alert(\"I can't send any video r audio to your contact, please check media\")\n    });\n  });\n});\npeer.on('close', function (id) {\n  document.getElementById(id).remove();\n});\nsocket.on('userJoined', function (data) {\n  peerConnections[data.id] = data;\n  console.log(\"user joined ::: calling initiator with just audio and video\", data.id);\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (mediaStream) {\n    console.log(\"user joined ::: calling initiator with just audio and video\", data.id);\n    callback = peer.call(data.id, mediaStream);\n\n    if (callback) {\n      peerConnections[callback.peer] = callback;\n      var ctr = 0;\n      callback.on('stream', function (userStream) {\n        if (ctr == 0) {\n          if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n            removeElementByID(data.id);\n            callerElement = document.createElement('video');\n            callerElement.setAttribute(\"id\", data.id);\n            callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n            callerElement.muted = false;\n            addVideo(callerElement, userStream);\n          } else {\n            removeElementByID(data.id);\n            callerElement = document.createElement('audio');\n            callerElement.setAttribute(\"id\", data.id);\n            callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n            callerElement.setAttribute(\"controls\", \"controls\");\n            callerElement.muted = false;\n            addAudio(callerElement, userStream);\n          }\n        }\n\n        ctr++;\n      });\n      callback.on('close', function () {\n        removeElementByID(data.id);\n      });\n      callback.on('error', function (err) {\n        console.log(err);\n      });\n    }\n  })[\"catch\"](function (error) {\n    //I have only audio, send to the audio to my peer\n    console.log(\"user joined:: I have only audio, send to the audio to my peer\", data.id);\n    var audioConstraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    navigator.mediaDevices.getUserMedia(audioConstraints).then(function (mediaCallStream) {\n      if (myVideoStream) {\n        callback = peer.call(data.id, mediaCallStream);\n      } else {\n        data = {\n          'id': myId,\n          'user': user,\n          'roomID': roomID,\n          'videoStream': mediaCallStream\n        };\n        socket.emit(\"changeMedia\", data); //never mind callback, i will call change media\n\n        callback = null;\n      }\n\n      if (callback) {\n        peerConnections[callback.peer] = callback;\n        var ctr = 0;\n        callback.on('stream', function (userStream) {\n          if (ctr == 0) {\n            if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n              //removeElementByID(data.id);\n              callerElement = document.createElement('video');\n              callerElement.setAttribute(\"id\", data.id);\n              callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n              callerElement.muted = false;\n              addVideo(callerElement, userStream);\n            } else {\n              removeElementByID(data.id);\n              callerElement = document.createElement('audio');\n              callerElement.setAttribute(\"id\", data.id);\n              callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n              callerElement.setAttribute(\"controls\", \"controls\");\n              callerElement.muted = false;\n              addAudio(callerElement, userStream);\n            }\n          }\n\n          ctr++;\n        });\n        callback.on('close', function () {\n          removeElementByID(data.id);\n        });\n        callback.on('error', function (err) {\n          console.log(err);\n        });\n        peerConnections[data.id] = callback;\n      }\n    })[\"catch\"](function (error) {\n      //alert(\"Please connect audioinput device and try again\");\n      console.log(error);\n    });\n  });\n  /*\n  let id = data.id;\n  let roomID = data.roomID;\n  let user = data.user;\n   const callback = peer.call(id, myVideoStream);\n   console.log(\"new user joined\", data);\n    if (callback) {\n       let ctr = 0;\n      callback.on('stream', (userStream) => {\n           if (ctr == 1) {\n               removeElementByID(data.id);\n               callerElement = document.createElement('video');\n              callerElement.setAttribute(\"id\", data.id);\n              callerElement.setAttribute(\"class\", \"callerBackVideo\");\n              callerElement.muted = false;\n              addVideo(callerElement, userStream);\n          }\n          ctr++;\n      });\n       callback.on('close', () => {\n          console.log(\"closing! callback video...\")\n          removeElementByID(data.id);\n      });\n       callback.on('error', (err) => {\n          console.log(err);\n      });\n  }\n  */\n});\nsocket.on('mediaChanged', function (data) {\n  //alert(\"media change\");\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (userStream) {\n    console.log(\"mediaChanged: initiator (recieved)\");\n    callback = peer.call(data.id, userStream);\n\n    if (callback) {\n      var ctr = 0;\n      callback.on('stream', function (userStream) {\n        if (ctr == 0) {\n          console.log(\"repipient callback : video stream\");\n\n          if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n            removeElementByID(data.id);\n            callerElement = document.createElement('video');\n            callerElement.setAttribute(\"id\", callback.peer);\n            callerElement.setAttribute(\"class\", \"repipient_video_changed\");\n            callerElement.muted = false;\n            addVideo(callerElement, userStream);\n          } else {\n            removeElementByID(data.id);\n            callerElement = document.createElement('audio');\n            callerElement.setAttribute(\"id\", data.id);\n            callerElement.setAttribute(\"class\", \"repipient_audio_changed\");\n            callerElement.setAttribute(\"controls\", \"controls\");\n            callerElement.muted = false;\n            addAudio(callerElement, userStream);\n          }\n        }\n\n        ctr++;\n      });\n      callback.on('close', function () {\n        removeElementByID(data.id);\n      });\n      callback.on('error', function (err) {\n        console.log(err);\n      });\n      peerConnections[data.id] = callback;\n    }\n  })[\"catch\"](function (error) {\n    var audioConstraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    navigator.mediaDevices.getUserMedia(audioConstraints).then(function (userStream) {\n      console.log(\"initiator SENT AND AUDIO\");\n      callback = peer.call(data.id, userStream);\n\n      if (callback) {\n        var ctr = 0;\n        callback.on('stream', function (userStream) {\n          console.log(\"this is for the audio, stream of the initiator\");\n\n          if (ctr == 0) {\n            console.log(userStream.getAudioTracks().length);\n            console.log(userStream.getVideoTracks().length);\n\n            if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n              console.log(\"user sent a video\");\n              removeElementByID(callback.peer);\n              callerElement = document.createElement('video');\n              callerElement.setAttribute(\"id\", callback.peer);\n              callerElement.setAttribute(\"class\", \"callerBackVideo\");\n              callerElement.muted = false;\n              addVideo(callerElement, userStream);\n            } else {\n              console.log(\"user sent a AUDIO\");\n              removeElementByID(callback.peer);\n              callerElement = document.createElement('audio');\n              callerElement.setAttribute(\"id\", callback.peer);\n              callerElement.setAttribute(\"class\", \"callbackAudio_media\");\n              callerElement.setAttribute(\"controls\", \"controls\");\n              callerElement.muted = false;\n              addAudio(callerElement, userStream);\n            }\n          }\n\n          ctr++;\n        });\n        callback.on('close', function () {\n          removeElementByID(data.id);\n        });\n        callback.on('error', function (err) {\n          console.log(err);\n        });\n        peerConnections[data.id] = callback;\n      }\n    })[\"catch\"](function (error) {\n      //alert(\"audio only\");\n      console.log(error);\n    });\n  });\n  /*\n  let id = data.id;\n  let roomID = data.roomID;\n  let user = data.user;\n   let callback = null;\n     if (myVideoStream !== null) {\n      callback = peer.call(id, myVideoStream);\n  } else if (myAudioStream !== null) {\n      callback = peer.call(id, myAudioStream);\n  }\n   console.log(\"my video\", myVideoStream);\n  console.log(\"my video\", myAudioStream);\n     if (callback) {\n       let ctr = 0;\n       callback.on('stream', (userStream) => {\n           if (ctr == 0) {\n               console.log(userStream.getAudioTracks().length)\n              console.log(userStream.getVideoTracks().length)\n               if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n                   console.log(\"user sent a video\")\n                   removeElementByID(data.id);\n                    callerElement = document.createElement('video');\n                  callerElement.setAttribute(\"id\", data.id);\n                  callerElement.setAttribute(\"class\", \"callerBackVideo\");\n                  callerElement.muted = false;\n                   addVideo(callerElement, userStream);\n                } else {\n                   console.log(\"user sent a AUDIO\")\n                   removeElementByID(data.id);\n                    callerElement = document.createElement('audio');\n                  callerElement.setAttribute(\"id\", data.id);\n                  callerElement.setAttribute(\"class\", \"callbackAudio\");\n                  callerElement.setAttribute(\"controls\", \"controls\");\n                  callerElement.muted = false;\n                   addAudio(callerElement, userStream);\n              }\n           }\n            ctr++;\n      });\n       callback.on('close', () => {\n          removeElementByID(data.id);\n      });\n       callback.on('error', (err) => {\n          console.log(err);\n      });\n       peerConnections[data.id] = callback;\n  }\n  */\n});\nsocket.on('userDisconnect', function (id) {\n  console.log(\"userDisconnected\", id);\n  removeElementByID(id);\n\n  try {\n    peerConnections[id].close();\n  } catch (err) {\n    console.log(\"error disconnect : \", err);\n  }\n});\ndocument.getElementById(\"btnShareScreen\").addEventListener(\"click\", function () {\n  shareScreen();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvd2ViUlRDLmpzP2MzMGQiXSwibmFtZXMiOlsic29ja2V0IiwiaW8iLCJwZWVyIiwiUGVlciIsImluaXRpYXRvciIsInRyaWNrbGUiLCJteVZpZGVvU3RyZWFtIiwibXlBdWRpb1N0cmVhbSIsInZpZGVvRWxlbWVudCIsImF1ZGlvRWxlbWVudCIsInNoYXJlZFNjcmVlbiIsInBlZXJDb25uZWN0aW9ucyIsIm1lZGlhQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZpZGVvR3JpZCIsImF1ZGlvSW5wdXRTZWxlY3QiLCJxdWVyeVNlbGVjdG9yIiwiYXVkaW9PdXRwdXRTZWxlY3QiLCJ2aWRlb1NlbGVjdCIsInNlbGVjdG9ycyIsImRpc2FibGVkIiwiSFRNTE1lZGlhRWxlbWVudCIsInByb3RvdHlwZSIsImdvdERldmljZXMiLCJkZXZpY2VJbmZvcyIsInZhbHVlcyIsIm1hcCIsInNlbGVjdCIsInZhbHVlIiwiZm9yRWFjaCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImkiLCJsZW5ndGgiLCJkZXZpY2VJbmZvIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImRldmljZUlkIiwia2luZCIsInRleHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiY29uc29sZSIsImxvZyIsInNlbGVjdG9ySW5kZXgiLCJBcnJheSIsInNsaWNlIiwiY2FsbCIsImNoaWxkTm9kZXMiLCJzb21lIiwibiIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImVudW1lcmF0ZURldmljZXMiLCJ0aGVuIiwiaGFuZGxlRXJyb3IiLCJhdHRhY2hTaW5rSWQiLCJlbGVtZW50Iiwic2lua0lkIiwibXV0ZWQiLCJzZXRTaW5rSWQiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIm5hbWUiLCJzZWxlY3RlZEluZGV4Iiwid2FybiIsImNoYW5nZUF1ZGlvRGVzdGluYXRpb24iLCJhdWRpb0Rlc3RpbmF0aW9uIiwiZ290U3RyZWFtIiwic3RyZWFtIiwid2luZG93Iiwic3JjT2JqZWN0IiwidmlkZW8iLCJhdWRpbyIsImRhdGEiLCJteUlkIiwidXNlciIsInJvb21JRCIsInN0YXJ0IiwiYWRkTXlBdWRpbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwiYXBwZW5kIiwiYWRkTXlWaWRlbyIsImFkZEF1ZGlvIiwiYWRkVmlkZW8iLCJhZGRWaWRlb0NvbnRlbnQiLCJjb250YWluZXJJRCIsImNvbnRhaW5lckVsZW1lbnQiLCJzaG93QnlFbGVtZW50SWQiLCJlbGVtZW50SUQiLCJlbCIsInN0eWxlIiwiZGlzcGxheSIsImhpZGVCeUVsZW1lbnRJZCIsInJlbW92ZUVsZW1lbnRCeUlEIiwiaWQiLCJyZW1vdmUiLCJjcmVhdGVVc2VyTWVkaWEiLCJjb25zdHJhaW50cyIsImdldFVzZXJNZWRpYSIsInNldEF0dHJpYnV0ZSIsImVyciIsImdldFRyYWNrcyIsInRyYWNrIiwic3RvcCIsImF1ZGlvU291cmNlIiwidmlkZW9Tb3VyY2UiLCJleGFjdCIsInVuZGVmaW5lZCIsInJlc3RhcnQiLCJlbWl0Iiwic3RvcFNoYXJpbmciLCJzaG93RWxlbWVudCIsInJlbW92ZUVsZW1lbnQiLCJkZXRlY3REZXNrdG9wU2hhcmVkIiwib24iLCJjb25uIiwiYWxlcnQiLCJhbnN3ZXIiLCJnZXRBdWRpb1RyYWNrcyIsImdldFZpZGVvVHJhY2tzIiwiY2FsbGVyRWxlbWVudCIsInVzZXJTdHJlYW0iLCJzaGFyZWRWaWQiLCJtZWRpYUNhbGxTdHJlYW0iLCJzaGFyZVNjcmVlbiIsImdldERpc3BsYXlNZWRpYSIsIk9iamVjdCIsImtleXMiLCJwZWVySUQiLCJjb25uZWN0Iiwic2VuZCIsInNoYXJpbmdTY3JlZW4iLCJvbmVuZGVkIiwib25jaGFuZ2UiLCJjdHIiLCJtZWRpYVN0cmVhbSIsImNhbGxiYWNrIiwiYXVkaW9Db25zdHJhaW50cyIsImNsb3NlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElB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LFFBQTNCO01BQ0g7SUFHSixDQXBFRCxXQW9FUyxVQUFDN0UsS0FBRCxFQUFXO01BRWhCO01BSUFuQixPQUFPLENBQUNDLEdBQVIsQ0FBWWtCLEtBQVo7SUFDSCxDQTNFRDtFQTZFSCxDQWhKRDtFQW9KQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFnQ0MsQ0EvT0Q7QUFrUEE5RCxNQUFNLENBQUNxSCxFQUFQLENBQVUsZ0JBQVYsRUFBNEIsVUFBQXBCLEVBQUUsRUFBSTtFQUU5QnRELE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtCQUFaLEVBQWdDcUQsRUFBaEM7RUFFQUQsaUJBQWlCLENBQUNDLEVBQUQsQ0FBakI7O0VBRUEsSUFBSTtJQUNBdEYsZUFBZSxDQUFDc0YsRUFBRCxDQUFmLENBQW9CNEMsS0FBcEI7RUFFSCxDQUhELENBR0UsT0FBT3RDLEdBQVAsRUFBWTtJQUVWNUQsT0FBTyxDQUFDQyxHQUFSLENBQVkscUJBQVosRUFBbUMyRCxHQUFuQztFQUNIO0FBRUosQ0FkRDtBQWtCQTFGLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixnQkFBeEIsRUFBMENtRSxnQkFBMUMsQ0FBMkQsT0FBM0QsRUFBb0UsWUFBVztFQUMzRThDLFdBQVc7QUFDZCxDQUZEIiwiZmlsZSI6Ii4vcmVzb3VyY2VzL2pzL3dlYlJUQy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuXG5jb25zdCBzb2NrZXQgPSBpbygnaHR0cHM6Ly9ydGNzZXJ2ZXIuZXN1Y2Nlc3MtaW5jLmNvbTo0MDAwMicsIHt9KTtcblxuY29uc3QgcGVlciA9IG5ldyBQZWVyKHtcbiAgICBpbml0aWF0b3I6IGZhbHNlLFxuICAgIHRyaWNrbGU6IGZhbHNlLFxufSk7XG5cbid1c2Ugc3RyaWN0JztcbmxldCBteVZpZGVvU3RyZWFtO1xubGV0IG15QXVkaW9TdHJlYW07XG5cbmxldCB2aWRlb0VsZW1lbnQ7XG5sZXQgYXVkaW9FbGVtZW50O1xuXG5cblxubGV0IHNoYXJlZFNjcmVlbiA9IGZhbHNlO1xuXG5jb25zdCBwZWVyQ29ubmVjdGlvbnMgPSB7fVxubGV0IG1lZGlhQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TWVkaWFDb250YWluZXInKTtcblxuXG5cblxubGV0IHZpZGVvR3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb0dyaWQnKTtcblxuY29uc3QgYXVkaW9JbnB1dFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCNhdWRpb1NvdXJjZScpO1xuY29uc3QgYXVkaW9PdXRwdXRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QjYXVkaW9PdXRwdXQnKTtcbmNvbnN0IHZpZGVvU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0I3ZpZGVvU291cmNlJyk7XG5jb25zdCBzZWxlY3RvcnMgPSBbYXVkaW9JbnB1dFNlbGVjdCwgYXVkaW9PdXRwdXRTZWxlY3QsIHZpZGVvU2VsZWN0XTtcblxuYXVkaW9PdXRwdXRTZWxlY3QuZGlzYWJsZWQgPSAhKCdzaW5rSWQnIGluIEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKTtcblxuZnVuY3Rpb24gZ290RGV2aWNlcyhkZXZpY2VJbmZvcykge1xuICAgIC8vIEhhbmRsZXMgYmVpbmcgY2FsbGVkIHNldmVyYWwgdGltZXMgdG8gdXBkYXRlIGxhYmVscy4gUHJlc2VydmUgdmFsdWVzLlxuICAgIGNvbnN0IHZhbHVlcyA9IHNlbGVjdG9ycy5tYXAoc2VsZWN0ID0+IHNlbGVjdC52YWx1ZSk7XG4gICAgc2VsZWN0b3JzLmZvckVhY2goc2VsZWN0ID0+IHtcbiAgICAgICAgd2hpbGUgKHNlbGVjdC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBzZWxlY3QucmVtb3ZlQ2hpbGQoc2VsZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRldmljZUluZm9zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGRldmljZUluZm8gPSBkZXZpY2VJbmZvc1tpXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgIG9wdGlvbi52YWx1ZSA9IGRldmljZUluZm8uZGV2aWNlSWQ7XG5cbiAgICAgICAgaWYgKGRldmljZUluZm8ua2luZCA9PT0gJ2F1ZGlvaW5wdXQnKSB7XG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGRldmljZUluZm8ubGFiZWwgfHwgYG1pY3JvcGhvbmUgJHthdWRpb0lucHV0U2VsZWN0Lmxlbmd0aCArIDF9YDtcbiAgICAgICAgICAgIGF1ZGlvSW5wdXRTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZXZpY2VJbmZvLmtpbmQgPT09ICdhdWRpb291dHB1dCcpIHtcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gZGV2aWNlSW5mby5sYWJlbCB8fCBgc3BlYWtlciAke2F1ZGlvT3V0cHV0U2VsZWN0Lmxlbmd0aCArIDF9YDtcbiAgICAgICAgICAgIGF1ZGlvT3V0cHV0U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoZGV2aWNlSW5mby5raW5kID09PSAndmlkZW9pbnB1dCcpIHtcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gZGV2aWNlSW5mby5sYWJlbCB8fCBgY2FtZXJhICR7dmlkZW9TZWxlY3QubGVuZ3RoICsgMX1gO1xuICAgICAgICAgICAgdmlkZW9TZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTb21lIG90aGVyIGtpbmQgb2Ygc291cmNlL2RldmljZTogJywgZGV2aWNlSW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0b3JzLmZvckVhY2goKHNlbGVjdCwgc2VsZWN0b3JJbmRleCkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoc2VsZWN0LmNoaWxkTm9kZXMpLnNvbWUobiA9PiBuLnZhbHVlID09PSB2YWx1ZXNbc2VsZWN0b3JJbmRleF0pKSB7XG4gICAgICAgICAgICBzZWxlY3QudmFsdWUgPSB2YWx1ZXNbc2VsZWN0b3JJbmRleF07XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbihnb3REZXZpY2VzKS5jYXRjaChoYW5kbGVFcnJvcik7XG5cbi8vIEF0dGFjaCBhdWRpbyBvdXRwdXQgZGV2aWNlIHRvIHZpZGVvIGVsZW1lbnQgdXNpbmcgZGV2aWNlL3NpbmsgSUQuXG5mdW5jdGlvbiBhdHRhY2hTaW5rSWQoZWxlbWVudCwgc2lua0lkKSB7XG5cbiAgICAvLyhtdXRlIGVsZW1lbnQsIGZlZWRiYWNrIGlmIGZhbHNlKVxuICAgIGVsZW1lbnQubXV0ZWQgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LnNpbmtJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZWxlbWVudC5zZXRTaW5rSWQoc2lua0lkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzLCBhdWRpbyBvdXRwdXQgZGV2aWNlIGF0dGFjaGVkOiAke3NpbmtJZH1gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1NlY3VyaXR5RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBZb3UgbmVlZCB0byB1c2UgSFRUUFMgZm9yIHNlbGVjdGluZyBhdWRpbyBvdXRwdXQgZGV2aWNlOiAke2Vycm9yfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAvLyBKdW1wIGJhY2sgdG8gZmlyc3Qgb3V0cHV0IGRldmljZSBpbiB0aGUgbGlzdCBhcyBpdCdzIHRoZSBkZWZhdWx0LlxuICAgICAgICAgICAgICAgIGF1ZGlvT3V0cHV0U2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwO1xuICAgICAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgb3V0cHV0IGRldmljZSBzZWxlY3Rpb24uJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGFuZ2VBdWRpb0Rlc3RpbmF0aW9uKCkge1xuICAgIGNvbnN0IGF1ZGlvRGVzdGluYXRpb24gPSBhdWRpb091dHB1dFNlbGVjdC52YWx1ZTtcblxuXG4gICAgaWYgKG15VmlkZW9TdHJlYW0pIHtcbiAgICAgICAgYXR0YWNoU2lua0lkKHZpZGVvRWxlbWVudCwgYXVkaW9EZXN0aW5hdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXR0YWNoU2lua0lkKGF1ZGlvRWxlbWVudCwgYXVkaW9EZXN0aW5hdGlvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnb3RTdHJlYW0oc3RyZWFtKSB7XG4gICAgd2luZG93LnN0cmVhbSA9IHN0cmVhbTsgLy8gbWFrZSBzdHJlYW0gYXZhaWxhYmxlIHRvIGNvbnNvbGVcbiAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtO1xuXG4gICAgLy9SZWdpc3RlciB0aGUgdmlkZW8gc3RyZWFtIHRvIG15IFN0cmVhbVxuICAgIG15VmlkZW9TdHJlYW0gPSBzdHJlYW07XG5cbiAgICAvLyBSZWZyZXNoIGJ1dHRvbiBsaXN0IGluIGNhc2UgbGFiZWxzIGhhdmUgYmVjb21lIGF2YWlsYWJsZVxuICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICAvL3N0YXJ0IGEgdmlkZW8gd2l0aCBhdWRpbyBjb25uZWN0aW9uIHdpZHRoIGRhdGEgb2YgdXNlclxuICAgIGxldCB2aWRlbyA9IGZhbHNlO1xuICAgIGxldCBhdWRpbyA9IHRydWU7XG5cblxuICAgIC8vc3RhcnQgYXVkaW9cbiAgICBkYXRhID0ge1xuICAgICAgICAnaWQnOiBteUlkLFxuICAgICAgICAndXNlcic6IHVzZXIsXG4gICAgICAgICdyb29tSUQnOiByb29tSURcbiAgICB9XG4gICAgc3RhcnQodmlkZW8sIGF1ZGlvLCBkYXRhKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRNeUF1ZGlvKGF1ZGlvLCBzdHJlYW0pIHtcbiAgICBhdWRpby5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgYXVkaW8ubXV0ZWQgPSB0cnVlO1xuXG4gICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAgIGF1ZGlvLnBsYXkoKVxuICAgIH0pXG4gICAgbWVkaWFDb250YWluZXIuYXBwZW5kKGF1ZGlvKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRNeVZpZGVvKHZpZGVvLCBzdHJlYW0pIHtcbiAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgdmlkZW8ubXV0ZWQgPSB0cnVlO1xuXG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAgIHZpZGVvLnBsYXkoKVxuICAgIH0pXG4gICAgbWVkaWFDb250YWluZXIuYXBwZW5kKHZpZGVvKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRBdWRpbyhhdWRpbywgc3RyZWFtKSB7XG4gICAgYXVkaW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICBhdWRpby5wbGF5KClcbiAgICB9KVxuICAgIHZpZGVvR3JpZC5hcHBlbmQoYXVkaW8pO1xufVxuXG5mdW5jdGlvbiBhZGRWaWRlbyh2aWRlbywgc3RyZWFtKSB7XG4gICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICB2aWRlby5wbGF5KClcbiAgICB9KVxuICAgIHZpZGVvR3JpZC5hcHBlbmQodmlkZW8pO1xufVxuXG5cbmZ1bmN0aW9uIGFkZFZpZGVvQ29udGVudChjb250YWluZXJJRCwgdmlkZW8sIHN0cmVhbSkge1xuICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgdmlkZW8ucGxheSgpXG4gICAgfSlcblxuICAgIGxldCBjb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySUQpO1xuICAgIGlmIChjb250YWluZXJFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKHZpZGVvKTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gc2hvd0J5RWxlbWVudElkKGVsZW1lbnRJRCkge1xuICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJRCk7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGlkZUJ5RWxlbWVudElkKGVsZW1lbnRJRCkge1xuICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJRCk7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVFbGVtZW50QnlJRChpZCkge1xuICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVVc2VyTWVkaWEodmlkZW8sIGF1ZGlvLCBjb25zdHJhaW50cykge1xuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oKHN0cmVhbSkgPT4ge1xuXG4gICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKFwibXlWaWRlb1wiKTtcbiAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoXCJteUF1ZGlvXCIpO1xuXG4gICAgICAgIGlmIChhdWRpbyA9PSB0cnVlICYmIHZpZGVvID09IHRydWUpIHtcbiAgICAgICAgICAgIG15QXVkaW9TdHJlYW0gPSBudWxsO1xuXG4gICAgICAgICAgICAvL1JlZ2lzdGVyIHRoZSB2aWRlbyBzdHJlYW0gdG8gbXkgU3RyZWFtXG4gICAgICAgICAgICBteVZpZGVvU3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgd2luZG93LnN0cmVhbSA9IHN0cmVhbTsgLy8gbWFrZSBzdHJlYW0gYXZhaWxhYmxlIHRvIGNvbnNvbGUgICAgICAgXG5cblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzIGlzIGEgdmlkZW9cIik7XG5cbiAgICAgICAgICAgIC8qKioqKioqXG4gICAgICAgICAgICAgICAgKE5PVEU6IFRISVMgU0hPVUxEIEJFIE1VVEVEID0gVFJVRSkgXG4gICAgICAgICAgICAqKioqKioqL1xuXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgdmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibXlWaWRlb1wiKTtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy92aWRlb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgYWRkTXlWaWRlbyh2aWRlb0VsZW1lbnQsIHN0cmVhbSk7XG5cblxuICAgICAgICAgICAgLy8gZGV0ZWN0RGVza3RvcFNoYXJlZChzdHJlYW0pXG4gICAgICAgIH0gZWxzZSB7XG5cblxuICAgICAgICAgICAgLy9SZWdpc3RlciB0aGUgdmlkZW8gc3RyZWFtIHRvIG15IFN0cmVhbVxuICAgICAgICAgICAgbXlWaWRlb1N0cmVhbSA9IG51bGw7XG4gICAgICAgICAgICB3aW5kb3cuc3RyZWFtID0gc3RyZWFtOyAvLyBtYWtlIHN0cmVhbSBhdmFpbGFibGUgdG8gY29uc29sZSAgICAgICBcblxuICAgICAgICAgICAgLy9hZGQgdG8gbXkgYXVkaW8gc3RyZWFtXG4gICAgICAgICAgICBteUF1ZGlvU3RyZWFtID0gc3RyZWFtO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRoaXMgaXMgYSBhdWRpbyBvbmx5XCIpXG5cbiAgICAgICAgICAgIC8qKioqKioqXG4gICAgICAgICAgICAgICAgKE5PVEU6IFRISVMgU0hPVUxEIEJFIE1VVEVEID0gVFJVRSkgXG4gICAgICAgICAgICAqKioqKioqL1xuICAgICAgICAgICAgYXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm15QXVkaW9cIik7XG4gICAgICAgICAgICBhdWRpb0VsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udHJvbHNcIiwgXCJjb250cm9sc1wiKTtcbiAgICAgICAgICAgIC8vYXVkaW9FbGVtZW50Lm11dGVkID0gZmFsc2U7XG4gICAgICAgICAgICBhdWRpb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBhZGRNeUF1ZGlvKGF1ZGlvRWxlbWVudCwgc3RyZWFtKTtcblxuICAgICAgICAgICAgLy8gZGV0ZWN0RGVza3RvcFNoYXJlZChzdHJlYW0pXG5cblxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG5cblxuICAgIH0pLnRoZW4oZ290RGV2aWNlcykuY2F0Y2goKGVycikgPT4ge1xuXG4gICAgICAgIGlmICh2aWRlbyA9PSB0cnVlICYmIGF1ZGlvID09IHRydWUpIHtcblxuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvL2FsZXJ0KFwibm8gbWVkaWEgZGV0ZWN0ZWQsIHBsZWFzZSBjb25uZWN0IGFuZCB0cnkgYWdhaW5cIilcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbn1cblxuZnVuY3Rpb24gc3RhcnQodmlkZW8sIGF1ZGlvLCBkYXRhKSB7XG5cbiAgICBpZiAod2luZG93LnN0cmVhbSkge1xuICAgICAgICB3aW5kb3cuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYXVkaW9Tb3VyY2UgPSBhdWRpb0lucHV0U2VsZWN0LnZhbHVlO1xuICAgIGNvbnN0IHZpZGVvU291cmNlID0gdmlkZW9TZWxlY3QudmFsdWU7XG5cbiAgICBpZiAodmlkZW8gPT0gdHJ1ZSAmJiBhdWRpbyA9PSB0cnVlKSB7XG5cbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3QgdmlkZW8gOiBzdGFydFwiKVxuXG4gICAgICAgIGNyZWF0ZVVzZXJNZWRpYSh2aWRlbywgYXVkaW8sIGNvbnN0cmFpbnRzKVxuXG4gICAgfSBlbHNlIGlmICh2aWRlbyA9PSBmYWxzZSAmJiBhdWRpbyA9PSB0cnVlKSB7XG5cbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB2aWRlbzogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3QgYXVkaW8gOiBzdGFydFwiKVxuICAgICAgICBjcmVhdGVVc2VyTWVkaWEodmlkZW8sIGF1ZGlvLCBjb25zdHJhaW50cylcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy9hbGVydChcIm5vIG1lZGlhIGRldGVjdGVkLCBwbGVhc2UgY29ubmVjdCBhbmQgdHJ5IGFnYWluXCIpXG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIHJlc3RhcnQoKSB7XG5cbiAgICBpZiAod2luZG93LnN0cmVhbSkge1xuICAgICAgICB3aW5kb3cuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgY29uc3QgdmlkZW9Tb3VyY2UgPSB2aWRlb1NlbGVjdC52YWx1ZTtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICB9O1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKChzdHJlYW0pID0+IHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcInJlc3RhcnRlZFwiKVxuXG5cbiAgICAgICAgd2luZG93LnN0cmVhbSA9IHN0cmVhbTsgLy8gbWFrZSBzdHJlYW0gYXZhaWxhYmxlIHRvIGNvbnNvbGVcbiAgICAgICAgdmlkZW9FbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcblxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiaSBoYXZlIG11dGVkIHRoaXNcIilcbiAgICAgICAgLy92aWRlb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vUmVnaXN0ZXIgdGhlIHZpZGVvIHN0cmVhbSB0byBteSBTdHJlYW1cbiAgICAgICAgbXlWaWRlb1N0cmVhbSA9IHN0cmVhbTtcblxuICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgJ2lkJzogbXlJZCxcbiAgICAgICAgICAgICd1c2VyJzogdXNlcixcbiAgICAgICAgICAgICdyb29tSUQnOiByb29tSUQsXG4gICAgICAgICAgICAndmlkZW9TdHJlYW0nOiBteVZpZGVvU3RyZWFtXG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgc29ja2V0LmVtaXQoXCJjaGFuZ2VNZWRpYVwiLCBkYXRhKTtcblxuICAgICAgICByZW1vdmVFbGVtZW50QnlJRChteUlkKTtcblxuXG4gICAgfSkuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXG59XG5cblxuXG4vL3VzZXIgZW5kIHN0b3Agc2hhcmluZ1xuZnVuY3Rpb24gc3RvcFNoYXJpbmcoKSB7XG5cbiAgICBsZXQgc2hvd0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlc3NvblNsaWRlXCIpO1xuXG4gICAgaWYgKHNob3dFbGVtZW50KSB7XG4gICAgICAgIHNob3dFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIGxldCByZW1vdmVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZWRWaWRlb1wiKTtcblxuICAgIGlmIChyZW1vdmVFbGVtZW50KSB7XG4gICAgICAgIHJlbW92ZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZXRlY3REZXNrdG9wU2hhcmVkKHN0cmVhbSkge1xuXG5cblxuICAgIHBlZXIub24oJ2Nvbm5lY3Rpb24nLCBmdW5jdGlvbihjb25uKSB7XG5cbiAgICAgICAgY29ubi5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgICAgICAgICAgaWYgKGRhdGEuc2hhcmVkU2NyZWVuID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAvL0B0b3RvIHBlZXIuc3RyZWFtIHRvIHdhaXQgZm9yIHRoZVxuXG4gICAgICAgICAgICAgICAgc2hhcmVkU2NyZWVuID0gdHJ1ZTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnNoYXJlZFNjcmVlbiA9PSBmYWxzZSkge1xuXG4gICAgICAgICAgICAgICAgc3RvcFNoYXJpbmcoKTtcblxuICAgICAgICAgICAgICAgIHNoYXJlZFNjcmVlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGFsZXJ0KFwidGhlIHN0cmVhbSBkYXRhXCIpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG4gICAgcGVlci5vbignY2xvc2UnLCBmdW5jdGlvbihjb25uKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2VcIilcbiAgICB9KTtcblxuICAgIHBlZXIub24oJ2NhbGwnLCBjYWxsID0+IHtcblxuICAgICAgICBpZiAoc3RyZWFtID09IG51bGwpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbnN3ZXIgdGhlIHN0cmVhbSB3aXRob3V0IGFueSBzdHJlYW1cIiwgY2FsbClcbiAgICAgICAgICAgIGNhbGwuYW5zd2VyKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbnN3ZXIgdGhlIHN0cmVhbVwiLCBzdHJlYW0pXG5cbiAgICAgICAgICAgIGNhbGwuYW5zd2VyKHN0cmVhbSk7XG5cbiAgICAgICAgICAgIGlmIChzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJyZWNpZXZlciBmcm9tIHNlbmRlciBpcyBhIHZpZGVvIDExLTI1IDo6IChwZWVyKVwiICsgY2FsbC5wZWVyKVxuXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGNhbGwucGVlcik7XG4gICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBlZXJDYWxsQmFja1ZpZGVvXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGFkZFZpZGVvKGNhbGxlckVsZW1lbnQsIHN0cmVhbSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG5cbiAgICAgICAgICAgICAgICBhbGVydChcInJlY2lldmVyIGZyb20gc2VuZGVyIGlzIGEgYXVkaW8gMjItMjUgOjogKHBlZXIpXCIgKyBjYWxsLnBlZXIpXG5cbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGVlckNhbGxCYWNrQXVkaW9cIik7IC8vY2FsbCBwZWVyXG4gICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLCBcImNvbnRyb2xzXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHN0cmVhbSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGwub24oJ3N0cmVhbScsIHVzZXJTdHJlYW0gPT4ge1xuXG4gICAgICAgICAgICBpZiAoc2hhcmVkU2NyZWVuID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBzaGFyZWRWaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgICAgIHNoYXJlZFZpZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNoYXJlZFZpZGVvXCIpO1xuXG5cbiAgICAgICAgICAgICAgICAvL3RoZSBsZXNzb24gc2hhcmVkIGNvbnRhaW5lciBtdXN0IGJlIG9uIHRoZSBtZW1iZXIgbGVzc29uIHNsaWRlciBjb21wb25lbnRcbiAgICAgICAgICAgICAgICBhZGRWaWRlb0NvbnRlbnQoJ2xlc3NvblNoYXJlZENvbnRhaW5lcicsIHNoYXJlZFZpZCwgdXNlclN0cmVhbSk7XG5cbiAgICAgICAgICAgICAgICAvL2hpZGUgbGVzc29uIFNsaWRlXG4gICAgICAgICAgICAgICAgaGlkZUJ5RWxlbWVudElkKFwibGVzc29uU2xpZGVcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy90aGUgdXNlciBkaWQgbm90XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJ1c2VyIHZpZGVvIFwiKVxuXG4gICAgICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogbXlJZCxcbiAgICAgICAgICAgICAgICAgICAgJ3VzZXInOiB1c2VyLFxuICAgICAgICAgICAgICAgICAgICAncm9vbUlEJzogcm9vbUlELFxuICAgICAgICAgICAgICAgICAgICAndmlkZW9TdHJlYW0nOiBtZWRpYUNhbGxTdHJlYW1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcImNoYW5nZU1lZGlhXCIsIGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbGwub24oJ2ZpbmlzaCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYWxsZWQgZmluaXNoXCIpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbGwub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgYWxlcnQoZXJyKVxuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuXG4gICAgICAgICAgICBhbGVydChcImNsb3NlZCBzaGFyZWRcIilcbiAgICAgICAgICAgIHNoYXJlZFZpZC5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xufTtcblxuXG5cblxuZnVuY3Rpb24gc2hhcmVTY3JlZW4oKSB7XG5cbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7XG4gICAgICAgIHZpZGVvOiB0cnVlLFxuICAgICAgICBhdWRpbzogdHJ1ZVxuICAgIH0pLnRoZW4oKHVzZXJTdHJlYW0pID0+IHtcblxuICAgICAgICBzaGFyZWRTY3JlZW4gPSB1c2VyU3RyZWFtO1xuXG4gICAgICAgIC8vQHRvZG86IChoaWRlIHNsaWRlIHRoZW4gc2hvdyB0aGUgdXNlciBzaGFyZWQpXG4gICAgICAgIGNvbnN0IHNoYXJlZFZpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgIHNoYXJlZFZpZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNoYXJlZFZpZGVvXCIpO1xuICAgICAgICBzaGFyZWRWaWQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAvL3RoZSBsZXNzb24gc2hhcmVkIGNvbnRhaW5lciBtdXN0IGJlIG9uIHRoZSBtZW1iZXIgbGVzc29uIHNsaWRlciBjb21wb25lbnRcbiAgICAgICAgYWRkVmlkZW9Db250ZW50KCdsZXNzb25TaGFyZWRDb250YWluZXInLCBzaGFyZWRWaWQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgIC8vaGlkZSBsZXNzb24gU2xpZGVcbiAgICAgICAgaGlkZUJ5RWxlbWVudElkKFwibGVzc29uU2xpZGVcIilcblxuICAgICAgICBjb25zb2xlLmxvZyhwZWVyQ29ubmVjdGlvbnMpXG5cblxuXG4gICAgICAgIC8vQ29ubmVjdCB0byBwZWVyc1xuICAgICAgICBPYmplY3Qua2V5cyhwZWVyQ29ubmVjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24ocGVlcklEKSB7XG5cbiAgICAgICAgICAgIC8vY29ubmVjdCBhbmQgc2VuZFxuICAgICAgICAgICAgdmFyIGNvbm4gPSBwZWVyLmNvbm5lY3QocGVlcklEKTtcblxuICAgICAgICAgICAgY29ubi5vbignb3BlbicsICgpID0+IHtcblxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKiogICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgKE5FVykgc2hhcmUgc2NyZWVuIGRhdGFcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiBwZWVySUQsXG4gICAgICAgICAgICAgICAgICAgICdzaGFyZWRTY3JlZW4nOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9hZGQgdG8gdGhlIGNvbm5lY3Rpb24sIGFuZCBzZW5kIHRoZW4gY2FsbFxuICAgICAgICAgICAgICAgIGNvbm4uc2VuZChkYXRhKTtcblxuICAgICAgICAgICAgICAgIGxldCBzaGFyaW5nU2NyZWVuID0gcGVlci5jYWxsKHBlZXJJRCwgc2hhcmVkU2NyZWVuKTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvL1RoZSBzY3JlZW4gcmVjb3JkIGlzIHN0b3BwZWQgYnkgbXlzZWxmXG4gICAgICAgIHNoYXJlZFNjcmVlbi5nZXRWaWRlb1RyYWNrcygpWzBdLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcblxuXG4gICAgICAgICAgICBzaG93QnlFbGVtZW50SWQoXCJsZXNzb25TbGlkZVwiKVxuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJlZFZpZGVvXCIpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAvL3NlbmQgdGhpcyBzaGFyZWQgc2NyZWVuIGZhbHNlIHRvIHN0b3AgcGVlclxuICAgICAgICAgICAgT2JqZWN0LmtleXMocGVlckNvbm5lY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKHBlZXJJRCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbm4gPSBwZWVyLmNvbm5lY3QocGVlcklEKTtcblxuICAgICAgICAgICAgICAgIGNvbm4ub24oJ29wZW4nLCAoKSA9PiB7XG5cblxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAoU1RPUCBTSEFSRSkgc2hhcmUgc2NyZWVuIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IHBlZXJJRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzaGFyZWRTY3JlZW4nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29ubi5zZW5kKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuXG5cblxuXG4gICAgICAgIC8vc29ja2V0LmVtaXQoXCJ1c2VyU2hhcmVcIiwgcm9vbUlELCBzaGFyZWRTY3JlZW4pO1xuXG4gICAgfSk7XG59XG5cbmF1ZGlvSW5wdXRTZWxlY3Qub25jaGFuZ2UgPSByZXN0YXJ0O1xuYXVkaW9PdXRwdXRTZWxlY3Qub25jaGFuZ2UgPSBjaGFuZ2VBdWRpb0Rlc3RpbmF0aW9uO1xudmlkZW9TZWxlY3Qub25jaGFuZ2UgPSByZXN0YXJ0O1xuXG5cblxuXG5wZWVyLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24oY29ubikge1xuXG4gICAgY29ubi5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJwZWVyIGNvbm5lY3RlZFwiLCBkYXRhKVxuXG4gICAgICAgIGlmIChkYXRhLnNoYXJlZFNjcmVlbiA9PSB0cnVlKSB7XG5cbiAgICAgICAgICAgIHNoYXJlZFNjcmVlbiA9IHRydWU7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnNoYXJlZFNjcmVlbiA9PSBmYWxzZSkge1xuXG4gICAgICAgICAgICBzdG9wU2hhcmluZygpO1xuXG4gICAgICAgICAgICBzaGFyZWRTY3JlZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBhbGVydChcInRoZSBzdHJlYW0gZGF0YVwiKVxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIGNvbm4ub24oJ2Nsb3NlJywgKGNvbm4pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjb25uZWN0aW9uIG9mIHBlZXIgaGFzIGJlZW4gY2xvc2VkXCIsIGNvbm4pXG4gICAgfSk7XG5cbn0pO1xuXG5wZWVyLm9uKCdvcGVuJywgKGlkKSA9PiB7XG5cbiAgICBjb25zb2xlLmxvZyhcIm15IHBlZXIgaWRcIiArIGlkKVxuICAgIGNvbnNvbGUubG9nKFwibXkgdXNlciBcIiwgdXNlcilcbiAgICBjb25zb2xlLmxvZyhcIm15IHJvb20gaWQgXCIsIHJvb21JRClcblxuICAgIG15SWQgPSBpZDtcblxuICAgIGRhdGEgPSB7XG4gICAgICAgICdpZCc6IGlkLFxuICAgICAgICAndXNlcic6IHVzZXIsXG4gICAgICAgICdyb29tSUQnOiByb29tSURcbiAgICB9XG5cbiAgICBzb2NrZXQuZW1pdChcIm5ld1VzZXJcIiwgZGF0YSk7XG5cbiAgICAvL3N0YXJ0IGEgdmlkZW8gd2l0aCBhdWRpbyBjb25uZWN0aW9uIHdpZHRoIGRhdGEgb2YgdXNlclxuICAgIGxldCB2aWRlbyA9IHRydWU7XG4gICAgbGV0IGF1ZGlvID0gdHJ1ZTtcblxuICAgIC8vc3RhcnQgdGhlIG15IG93biB2aWRlbyBjYW1lcmFcblxuICAgIHN0YXJ0KHZpZGVvLCBhdWRpbywgZGF0YSlcblxufSk7XG5cblxuXG5wZWVyLm9uKCdjYWxsJywgY2FsbCA9PiB7XG5cbiAgICBsZXQgY3RyID0gMDtcblxuICAgIGNvbnNvbGUubG9nKFwiUEVFUjo6IENBTExJTkcuLi4gZm9yIGEgdmlkZW8gc3RyZWFtIG9yIGF1ZGlvIHN0cmVhbSAuLi5cIik7XG5cbiAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgY29uc3QgdmlkZW9Tb3VyY2UgPSB2aWRlb1NlbGVjdC52YWx1ZTtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICB9O1xuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oKHN0cmVhbSkgPT4ge1xuXG4gICAgICAgIGlmIChzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgLy9hbGVydChcInN0cmVhbSBmcm9tIHNlbmRlciBpcyBhIHZpZGVvIDFcIilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vYWxlcnQoXCJzdHJlYW0gZnJvbSBzZW5kZXIgaXMgYSBhdWRpbyAyXCIpXG4gICAgICAgIH1cblxuXG4gICAgICAgIGNhbGwuYW5zd2VyKHN0cmVhbSk7XG5cbiAgICAgICAgY2FsbC5vbignc3RyZWFtJywgKHVzZXJTdHJlYW0pID0+IHtcblxuXG5cbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uc1tjYWxsLnBlZXJdID0gY2FsbDtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZWNpZXZlIHZpZGVvIGZyb20gaW5pdGlhdG9yIFwiLCBjYWxsKTtcblxuICAgICAgICAgICAgaWYgKGN0ciA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hhcmVkU2NyZWVuID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVkVmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVkVmlkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic2hhcmVkVmlkZW9cIik7XG5cblxuICAgICAgICAgICAgICAgICAgICAvL3RoZSBsZXNzb24gc2hhcmVkIGNvbnRhaW5lciBtdXN0IGJlIG9uIHRoZSBtZW1iZXIgbGVzc29uIHNsaWRlciBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW9Db250ZW50KCdsZXNzb25TaGFyZWRDb250YWluZXInLCBzaGFyZWRWaWQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vaGlkZSBsZXNzb24gU2xpZGVcbiAgICAgICAgICAgICAgICAgICAgaGlkZUJ5RWxlbWVudElkKFwibGVzc29uU2xpZGVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh1c2VyU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09IDEgJiYgdXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcInJlY2lldmVyIGZyb20gc2VuZGVyIGlzIGEgdmlkZW8gNSA6OiAocGVlcilcIiArIGNhbGwucGVlcilcblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGVlckNhbGxCYWNrVmlkZW9cIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcInJlY2lldmVyIGZyb20gc2VuZGVyIGlzIGEgYXVkaW8gNiA6OiAocGVlcilcIiArIGNhbGwucGVlcilcblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGVlckNhbGxCYWNrQXVkaW9cIik7IC8vY2FsbCBwZWVyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udHJvbHNcIiwgXCJjb250cm9sc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3RyKytcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FsbC5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIGRpc2NvbmVjdGVkXCIpXG4gICAgICAgIH0pO1xuXG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJyZWNpZXZlIGF1ZGlvIGZyb20gaW5pdGlhdG9yXCIsIGNhbGwpO1xuXG5cblxuICAgICAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgdmlkZW86IGZhbHNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKChzdHJlYW0pID0+IHtcblxuICAgICAgICAgICAgaWYgKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PSAxICYmIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAvL2FsZXJ0KFwic3RyZWFtIGZyb20gc2VuZGVyIGlzIGEgdmlkZW8gM1wiKVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy9hbGVydChcInN0cmVhbSBmcm9tIHNlbmRlciBpcyBhIGF1ZGlvIDRcIilcblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGNhbGwuYW5zd2VyKHN0cmVhbSk7XG5cbiAgICAgICAgICAgIGNhbGwub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbnNbY2FsbC5wZWVyXSA9IGNhbGw7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZWRTY3JlZW4gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVkVmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZFZpZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNoYXJlZFZpZGVvXCIpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhlIGxlc3NvbiBzaGFyZWQgY29udGFpbmVyIG11c3QgYmUgb24gdGhlIG1lbWJlciBsZXNzb24gc2xpZGVyIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW9Db250ZW50KCdsZXNzb25TaGFyZWRDb250YWluZXInLCBzaGFyZWRWaWQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2hpZGUgbGVzc29uIFNsaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlQnlFbGVtZW50SWQoXCJsZXNzb25TbGlkZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiB1c2VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcInJlY2lldmVyIGZyb20gc2VuZGVyIGlzIGEgdmlkZW8gNyAgOjogKHBlZXIpIFwiICsgY2FsbC5wZWVyKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGNhbGwucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGVlckNhbGxCYWNrVmlkZW9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFZpZGVvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KFwicmVjaWV2ZXIgZnJvbSBzZW5kZXIgaXMgYSBhdWRpbyA4IDo6IChwZWVyKVwiICsgY2FsbC5wZWVyKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGNhbGwucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGVlckNhbGxCYWNrQXVkaW9cIik7IC8vY2FsbCBwZWVyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3RyKytcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYWxsLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsLnBlZXIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBkaXNjb25lY3RlZFwiKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvL2FsZXJ0KFwiSSBjYW4ndCBzZW5kIGFueSB2aWRlbyByIGF1ZGlvIHRvIHlvdXIgY29udGFjdCwgcGxlYXNlIGNoZWNrIG1lZGlhXCIpXG4gICAgICAgIH0pO1xuXG5cbiAgICB9KTtcblxuXG5cblxufSk7XG5cbnBlZXIub24oJ2Nsb3NlJywgKGlkKSA9PiB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnJlbW92ZSgpO1xufSk7XG5cblxuc29ja2V0Lm9uKCd1c2VySm9pbmVkJywgKGRhdGEpID0+IHtcblxuXG4gICAgcGVlckNvbm5lY3Rpb25zW2RhdGEuaWRdID0gZGF0YTtcblxuICAgIGNvbnNvbGUubG9nKFwidXNlciBqb2luZWQgOjo6IGNhbGxpbmcgaW5pdGlhdG9yIHdpdGgganVzdCBhdWRpbyBhbmQgdmlkZW9cIiwgZGF0YS5pZCk7XG5cbiAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgY29uc3QgdmlkZW9Tb3VyY2UgPSB2aWRlb1NlbGVjdC52YWx1ZTtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICB9O1xuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oKG1lZGlhU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIGpvaW5lZCA6OjogY2FsbGluZyBpbml0aWF0b3Igd2l0aCBqdXN0IGF1ZGlvIGFuZCB2aWRlb1wiLCBkYXRhLmlkKTtcblxuICAgICAgICBjYWxsYmFjayA9IHBlZXIuY2FsbChkYXRhLmlkLCBtZWRpYVN0cmVhbSk7XG5cbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uc1tjYWxsYmFjay5wZWVyXSA9IGNhbGxiYWNrO1xuXG4gICAgICAgICAgICBsZXQgY3RyID0gMDtcblxuICAgICAgICAgICAgY2FsbGJhY2sub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlclN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PSAxICYmIHVzZXJTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInVzZXJfam9pbmVkX3BlZXJfY2FsbF9iYWNrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidXNlcl9qb2luZWRfcGVlcl9jYWxsX2JhY2tcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIGN0cisrO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYWxsYmFjay5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfVxuXG5cbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcblxuICAgICAgICAvL0kgaGF2ZSBvbmx5IGF1ZGlvLCBzZW5kIHRvIHRoZSBhdWRpbyB0byBteSBwZWVyXG4gICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBqb2luZWQ6OiBJIGhhdmUgb25seSBhdWRpbywgc2VuZCB0byB0aGUgYXVkaW8gdG8gbXkgcGVlclwiLCBkYXRhLmlkKTtcblxuXG5cbiAgICAgICAgY29uc3QgYXVkaW9Db25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgIGF1ZGlvOiB7IGRldmljZUlkOiBhdWRpb1NvdXJjZSA/IHsgZXhhY3Q6IGF1ZGlvU291cmNlIH0gOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgIHZpZGVvOiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShhdWRpb0NvbnN0cmFpbnRzKS50aGVuKChtZWRpYUNhbGxTdHJlYW0pID0+IHtcblxuICAgICAgICAgICAgaWYgKG15VmlkZW9TdHJlYW0pIHtcblxuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBwZWVyLmNhbGwoZGF0YS5pZCwgbWVkaWFDYWxsU3RyZWFtKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IG15SWQsXG4gICAgICAgICAgICAgICAgICAgICd1c2VyJzogdXNlcixcbiAgICAgICAgICAgICAgICAgICAgJ3Jvb21JRCc6IHJvb21JRCxcbiAgICAgICAgICAgICAgICAgICAgJ3ZpZGVvU3RyZWFtJzogbWVkaWFDYWxsU3RyZWFtXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJjaGFuZ2VNZWRpYVwiLCBkYXRhKTtcblxuICAgICAgICAgICAgICAgIC8vbmV2ZXIgbWluZCBjYWxsYmFjaywgaSB3aWxsIGNhbGwgY2hhbmdlIG1lZGlhXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbnNbY2FsbGJhY2sucGVlcl0gPSBjYWxsYmFjaztcblxuXG4gICAgICAgICAgICAgICAgbGV0IGN0ciA9IDA7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjay5vbignc3RyZWFtJywgKHVzZXJTdHJlYW0pID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiB1c2VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ1c2VyX2pvaW5lZF9wZWVyX2NhbGxfYmFja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ1c2VyX2pvaW5lZF9wZWVyX2NhbGxfYmFja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQXVkaW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgY3RyKys7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjay5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb25zW2RhdGEuaWRdID0gY2FsbGJhY2s7XG5cblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cbiAgICAgICAgICAgIC8vYWxlcnQoXCJQbGVhc2UgY29ubmVjdCBhdWRpb2lucHV0IGRldmljZSBhbmQgdHJ5IGFnYWluXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICAvKlxuICAgIGxldCBpZCA9IGRhdGEuaWQ7XG4gICAgbGV0IHJvb21JRCA9IGRhdGEucm9vbUlEO1xuICAgIGxldCB1c2VyID0gZGF0YS51c2VyO1xuXG4gICAgY29uc3QgY2FsbGJhY2sgPSBwZWVyLmNhbGwoaWQsIG15VmlkZW9TdHJlYW0pO1xuXG4gICAgY29uc29sZS5sb2coXCJuZXcgdXNlciBqb2luZWRcIiwgZGF0YSk7XG5cblxuICAgIGlmIChjYWxsYmFjaykge1xuXG4gICAgICAgIGxldCBjdHIgPSAwO1xuICAgICAgICBjYWxsYmFjay5vbignc3RyZWFtJywgKHVzZXJTdHJlYW0pID0+IHtcblxuICAgICAgICAgICAgaWYgKGN0ciA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcblxuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhbGxlckJhY2tWaWRlb1wiKTtcbiAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYWRkVmlkZW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHIrKztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FsbGJhY2sub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbG9zaW5nISBjYWxsYmFjayB2aWRlby4uLlwiKVxuICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbGxiYWNrLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAqL1xuXG59KTtcblxuXG5zb2NrZXQub24oJ21lZGlhQ2hhbmdlZCcsIChkYXRhKSA9PiB7XG5cblxuICAgIC8vYWxlcnQoXCJtZWRpYSBjaGFuZ2VcIik7XG5cbiAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgY29uc3QgdmlkZW9Tb3VyY2UgPSB2aWRlb1NlbGVjdC52YWx1ZTtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICB9O1xuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oKHVzZXJTdHJlYW0pID0+IHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIm1lZGlhQ2hhbmdlZDogaW5pdGlhdG9yIChyZWNpZXZlZClcIilcblxuICAgICAgICBjYWxsYmFjayA9IHBlZXIuY2FsbChkYXRhLmlkLCB1c2VyU3RyZWFtKTtcblxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcblxuICAgICAgICAgICAgbGV0IGN0ciA9IDA7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdzdHJlYW0nLCAodXNlclN0cmVhbSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKGN0ciA9PSAwKSB7XG5cblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcGlwaWVudCBjYWxsYmFjayA6IHZpZGVvIHN0cmVhbVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlclN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PSAxICYmIHVzZXJTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGNhbGxiYWNrLnBlZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInJlcGlwaWVudF92aWRlb19jaGFuZ2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicmVwaXBpZW50X2F1ZGlvX2NoYW5nZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIGN0cisrO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYWxsYmFjay5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbnNbZGF0YS5pZF0gPSBjYWxsYmFjaztcbiAgICAgICAgfVxuXG5cbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcblxuICAgICAgICBjb25zdCBhdWRpb0NvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgdmlkZW86IGZhbHNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGF1ZGlvQ29uc3RyYWludHMpLnRoZW4oKHVzZXJTdHJlYW0pID0+IHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbml0aWF0b3IgU0VOVCBBTkQgQVVESU9cIilcblxuICAgICAgICAgICAgY2FsbGJhY2sgPSBwZWVyLmNhbGwoZGF0YS5pZCwgdXNlclN0cmVhbSk7XG5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuXG4gICAgICAgICAgICAgICAgbGV0IGN0ciA9IDA7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjay5vbignc3RyZWFtJywgKHVzZXJTdHJlYW0pID0+IHtcblxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhpcyBpcyBmb3IgdGhlIGF1ZGlvLCBzdHJlYW0gb2YgdGhlIGluaXRpYXRvclwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlclN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09IDEgJiYgdXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgc2VudCBhIHZpZGVvXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsYmFjay5wZWVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbGJhY2sucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhbGxlckJhY2tWaWRlb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIHNlbnQgYSBBVURJT1wiKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoY2FsbGJhY2sucGVlcik7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbGJhY2sucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhbGxiYWNrQXVkaW9fbWVkaWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLCBcImNvbnRyb2xzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIGN0cisrO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uc1tkYXRhLmlkXSA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cbiAgICAgICAgICAgIC8vYWxlcnQoXCJhdWRpbyBvbmx5XCIpO1xuXG5cblxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cblxuXG4gICAgLypcbiAgICBsZXQgaWQgPSBkYXRhLmlkO1xuICAgIGxldCByb29tSUQgPSBkYXRhLnJvb21JRDtcbiAgICBsZXQgdXNlciA9IGRhdGEudXNlcjtcblxuICAgIGxldCBjYWxsYmFjayA9IG51bGw7XG5cblxuXG4gICAgaWYgKG15VmlkZW9TdHJlYW0gIT09IG51bGwpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBwZWVyLmNhbGwoaWQsIG15VmlkZW9TdHJlYW0pO1xuICAgIH0gZWxzZSBpZiAobXlBdWRpb1N0cmVhbSAhPT0gbnVsbCkge1xuICAgICAgICBjYWxsYmFjayA9IHBlZXIuY2FsbChpZCwgbXlBdWRpb1N0cmVhbSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJteSB2aWRlb1wiLCBteVZpZGVvU3RyZWFtKTtcbiAgICBjb25zb2xlLmxvZyhcIm15IHZpZGVvXCIsIG15QXVkaW9TdHJlYW0pO1xuXG5cblxuICAgIGlmIChjYWxsYmFjaykge1xuXG4gICAgICAgIGxldCBjdHIgPSAwO1xuXG4gICAgICAgIGNhbGxiYWNrLm9uKCdzdHJlYW0nLCAodXNlclN0cmVhbSkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aClcblxuICAgICAgICAgICAgICAgIGlmICh1c2VyU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09IDEgJiYgdXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIHNlbnQgYSB2aWRlb1wiKVxuXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYWxsZXJCYWNrVmlkZW9cIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgc2VudCBhIEFVRElPXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG5cblxuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhbGxiYWNrQXVkaW9cIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udHJvbHNcIiwgXCJjb250cm9sc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGN0cisrO1xuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsYmFjay5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FsbGJhY2sub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGVlckNvbm5lY3Rpb25zW2RhdGEuaWRdID0gY2FsbGJhY2s7XG4gICAgfVxuICAgICovXG59KTtcblxuXG5zb2NrZXQub24oJ3VzZXJEaXNjb25uZWN0JywgaWQgPT4ge1xuXG4gICAgY29uc29sZS5sb2coXCJ1c2VyRGlzY29ubmVjdGVkXCIsIGlkKTtcblxuICAgIHJlbW92ZUVsZW1lbnRCeUlEKGlkKTtcblxuICAgIHRyeSB7XG4gICAgICAgIHBlZXJDb25uZWN0aW9uc1tpZF0uY2xvc2UoKTtcblxuICAgIH0gY2F0Y2ggKGVycikge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgZGlzY29ubmVjdCA6IFwiLCBlcnIpXG4gICAgfVxuXG59KTtcblxuXG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuU2hhcmVTY3JlZW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgIHNoYXJlU2NyZWVuKCk7XG59KTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./resources/js/webRTC.js\n");

/***/ }),

/***/ 7:
/*!**************************************!*\
  !*** multi ./resources/js/webRTC.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /var/www/html/esi_development/resources/js/webRTC.js */"./resources/js/webRTC.js");


/***/ })

/******/ });