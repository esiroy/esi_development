/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 7);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./resources/js/webRTC.js":
/*!********************************!*\
  !*** ./resources/js/webRTC.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*\n *  Copyright (c) 2015 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nvar socket = io('https://rtcserver.esuccess-inc.com:40002', {});\nvar peer = new Peer({\n  initiator: false,\n  trickle: false\n});\n'use strict';\n\nvar myVideoStream;\nvar myAudioStream;\nvar videoElement;\nvar audioElement;\nvar sharedScreen = false;\nvar peerConnections = {};\nvar mediaContainer = document.getElementById('myMediaContainer');\nvar videoGrid = document.getElementById('videoGrid');\nvar audioInputSelect = document.querySelector('select#audioSource');\nvar audioOutputSelect = document.querySelector('select#audioOutput');\nvar videoSelect = document.querySelector('select#videoSource');\nvar selectors = [audioInputSelect, audioOutputSelect, videoSelect];\naudioOutputSelect.disabled = !('sinkId' in HTMLMediaElement.prototype);\n\nfunction gotDevices(deviceInfos) {\n  // Handles being called several times to update labels. Preserve values.\n  var values = selectors.map(function (select) {\n    return select.value;\n  });\n  selectors.forEach(function (select) {\n    while (select.firstChild) {\n      select.removeChild(select.firstChild);\n    }\n  });\n\n  for (var i = 0; i !== deviceInfos.length; ++i) {\n    var deviceInfo = deviceInfos[i];\n    var option = document.createElement('option');\n    option.value = deviceInfo.deviceId;\n\n    if (deviceInfo.kind === 'audioinput') {\n      option.text = deviceInfo.label || \"microphone \".concat(audioInputSelect.length + 1);\n      audioInputSelect.appendChild(option);\n    } else if (deviceInfo.kind === 'audiooutput') {\n      option.text = deviceInfo.label || \"speaker \".concat(audioOutputSelect.length + 1);\n      audioOutputSelect.appendChild(option);\n    } else if (deviceInfo.kind === 'videoinput') {\n      option.text = deviceInfo.label || \"camera \".concat(videoSelect.length + 1);\n      videoSelect.appendChild(option);\n    } else {\n      console.log('Some other kind of source/device: ', deviceInfo);\n    }\n  }\n\n  selectors.forEach(function (select, selectorIndex) {\n    if (Array.prototype.slice.call(select.childNodes).some(function (n) {\n      return n.value === values[selectorIndex];\n    })) {\n      select.value = values[selectorIndex];\n    }\n  });\n}\n\nnavigator.mediaDevices.enumerateDevices().then(gotDevices)[\"catch\"](handleError); // Attach audio output device to video element using device/sink ID.\n\nfunction attachSinkId(element, sinkId) {\n  //(mute element, feedback if false)\n  element.muted = true;\n\n  if (typeof element.sinkId !== 'undefined') {\n    element.setSinkId(sinkId).then(function () {\n      console.log(\"Success, audio output device attached: \".concat(sinkId));\n    })[\"catch\"](function (error) {\n      var errorMessage = error;\n\n      if (error.name === 'SecurityError') {\n        errorMessage = \"You need to use HTTPS for selecting audio output device: \".concat(error);\n      }\n\n      console.error(errorMessage); // Jump back to first output device in the list as it's the default.\n\n      audioOutputSelect.selectedIndex = 0;\n    });\n  } else {\n    console.warn('Browser does not support output device selection.');\n  }\n}\n\nfunction changeAudioDestination() {\n  var audioDestination = audioOutputSelect.value;\n\n  if (myVideoStream) {\n    attachSinkId(videoElement, audioDestination);\n  } else {\n    attachSinkId(audioElement, audioDestination);\n  }\n}\n\nfunction gotStream(stream) {\n  window.stream = stream; // make stream available to console\n\n  videoElement.srcObject = stream; //Register the video stream to my Stream\n\n  myVideoStream = stream; // Refresh button list in case labels have become available\n\n  return navigator.mediaDevices.enumerateDevices();\n}\n\nfunction handleError(error) {\n  //start a video with audio connection width data of user\n  var video = false;\n  var audio = true; //start audio\n\n  data = {\n    'id': myId,\n    'user': user,\n    'roomID': roomID\n  };\n  start(video, audio, data);\n}\n\nfunction addMyAudio(audio, stream) {\n  audio.srcObject = stream;\n  audio.addEventListener('loadedmetadata', function () {\n    audio.play();\n  });\n  mediaContainer.append(audio);\n}\n\nfunction addMyVideo(video, stream) {\n  video.srcObject = stream;\n  video.addEventListener('loadedmetadata', function () {\n    video.play();\n  });\n  mediaContainer.append(video);\n}\n\nfunction addAudio(audio, stream) {\n  audio.srcObject = stream;\n  audio.addEventListener('loadedmetadata', function () {\n    audio.play();\n  });\n  videoGrid.append(audio);\n}\n\nfunction addVideo(video, stream) {\n  video.srcObject = stream;\n  video.addEventListener('loadedmetadata', function () {\n    video.play();\n  });\n  videoGrid.append(video);\n}\n\nfunction addVideoContent(containerID, video, stream) {\n  video.srcObject = stream;\n  video.addEventListener('loadedmetadata', function () {\n    video.play();\n  });\n  var containerElement = document.getElementById(containerID);\n\n  if (containerElement) {\n    containerElement.append(video);\n  }\n}\n\nfunction showByElementId(elementID) {\n  var el = document.getElementById(elementID);\n\n  if (el) {\n    el.style.display = 'block';\n  }\n}\n\nfunction hideByElementId(elementID) {\n  var el = document.getElementById(elementID);\n\n  if (el) {\n    el.style.display = 'none';\n  }\n}\n\nfunction removeElementByID(id) {\n  var element = document.getElementById(id);\n\n  if (element) {\n    element.remove();\n  }\n}\n\nfunction createUserMedia(video, audio, constraints) {\n  navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n    removeElementByID(\"myVideo\");\n    removeElementByID(\"myAudio\");\n\n    if (audio == true && video == true) {\n      myAudioStream = null; //Register the video stream to my Stream\n\n      myVideoStream = stream;\n      window.stream = stream; // make stream available to console       \n\n      console.log(\"this is a video\");\n      /*******\n          (NOTE: THIS SHOULD BE MUTED = TRUE) \n      *******/\n\n      videoElement = document.createElement('video');\n      videoElement.setAttribute(\"id\", \"myVideo\");\n      videoElement.muted = false; //videoElement.muted = true;\n\n      addMyVideo(videoElement, stream);\n      detectDesktopShared(stream);\n    } else {\n      //Register the video stream to my Stream\n      myVideoStream = null;\n      window.stream = stream; // make stream available to console       \n      //add to my audio stream\n\n      myAudioStream = stream;\n      console.log(\"this is a audio only\");\n      /*******\n          (NOTE: THIS SHOULD BE MUTED = TRUE) \n      *******/\n\n      audioElement = document.createElement('audio');\n      audioElement.setAttribute(\"id\", \"myAudio\");\n      audioElement.setAttribute(\"controls\", \"controls\"); //audioElement.muted = false;\n\n      audioElement.muted = true;\n      addMyAudio(audioElement, stream);\n      detectDesktopShared(stream);\n    }\n\n    return navigator.mediaDevices.enumerateDevices();\n  }).then(gotDevices)[\"catch\"](function (err) {\n    if (video == true && audio == true) {\n      handleError(err);\n    } else {//alert(\"no media detected, please connect and try again\")\n    }\n  });\n}\n\nfunction start(video, audio, data) {\n  if (window.stream) {\n    window.stream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n\n  if (video == true && audio == true) {\n    var constraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: {\n        deviceId: videoSource ? {\n          exact: videoSource\n        } : undefined\n      }\n    };\n    console.log(\"connect video : start\");\n    createUserMedia(video, audio, constraints);\n  } else if (video == false && audio == true) {\n    var _constraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    console.log(\"connect audio : start\");\n    createUserMedia(video, audio, _constraints);\n  } else {//alert(\"no media detected, please connect and try again\")\n  }\n}\n\nfunction restart() {\n  if (window.stream) {\n    window.stream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n    console.log(\"restarted\");\n    window.stream = stream; // make stream available to console\n\n    videoElement.srcObject = stream; //console.log(\"i have muted this\")\n    //videoElement.muted = true;\n    //Register the video stream to my Stream\n\n    myVideoStream = stream;\n    data = {\n      'id': myId,\n      'user': user,\n      'roomID': roomID,\n      'videoStream': myVideoStream\n    };\n    socket.emit(\"changeMedia\", data);\n    removeElementByID(myId);\n  })[\"catch\"](handleError);\n} //user end stop sharing\n\n\nfunction stopSharing() {\n  var showElement = document.getElementById(\"lessonSlide\");\n\n  if (showElement) {\n    showElement.style.display = 'block';\n  }\n\n  var removeElement = document.getElementById(\"sharedVideo\");\n\n  if (removeElement) {\n    removeElement.remove();\n  }\n}\n\nfunction detectDesktopShared(stream) {\n  peer.on('connection', function (conn) {\n    conn.on('data', function (data) {\n      if (data.sharedScreen == true) {\n        //@toto peer.stream to wait for the\n        sharedScreen = true;\n      } else if (data.sharedScreen == false) {\n        stopSharing();\n        sharedScreen = false;\n        return false;\n      }\n    });\n  });\n  peer.on('close', function (conn) {\n    console.log(\"close\");\n  });\n  peer.on('call', function (call) {\n    if (stream == null) {\n      console.log(\"answer the stream without any stream\", call);\n      call.answer();\n    } else {\n      console.log(\"answer the stream\", stream);\n      call.answer(stream);\n    }\n\n    call.on('stream', function (userStream) {\n      if (sharedScreen == true) {\n        sharedVid = document.createElement('video');\n        sharedVid.setAttribute(\"id\", \"sharedVideo\"); //the lesson shared container must be on the member lesson slider component\n\n        addVideoContent('lessonSharedContainer', sharedVid, userStream); //hide lesson Slide\n\n        hideByElementId(\"lessonSlide\");\n      }\n    });\n    call.on('finish', function () {\n      console.log(\"called finish\");\n    });\n    call.on('error', function (err) {\n      alert(err);\n    });\n    call.on(\"close\", function () {\n      alert(\"closed shared\");\n      sharedVid.remove();\n    });\n  });\n}\n\n;\n\nfunction shareScreen() {\n  navigator.mediaDevices.getDisplayMedia({\n    video: true,\n    audio: true\n  }).then(function (userStream) {\n    sharedScreen = userStream; //@todo: (hide slide then show the user shared)\n\n    var sharedVid = document.createElement('video');\n    sharedVid.setAttribute(\"id\", \"sharedVideo\");\n    sharedVid.muted = false; //the lesson shared container must be on the member lesson slider component\n\n    addVideoContent('lessonSharedContainer', sharedVid, userStream); //hide lesson Slide\n\n    hideByElementId(\"lessonSlide\");\n    console.log(peerConnections); //Connect to peers\n\n    Object.keys(peerConnections).forEach(function (peerID) {\n      //connect and send\n      var conn = peer.connect(peerID);\n      conn.on('open', function () {\n        /*********************               \n            (NEW) share screen data\n        *************************/\n        var data = {\n          'id': peerID,\n          'sharedScreen': true\n        }; //add to the connection, and send then call\n\n        conn.send(data);\n        var sharingScreen = peer.call(peerID, sharedScreen);\n      });\n    }); //The screen record is stopped by myself\n\n    sharedScreen.getVideoTracks()[0].onended = function () {\n      showByElementId(\"lessonSlide\");\n      document.getElementById(\"sharedVideo\").remove(); //send this shared screen false to stop peer\n\n      Object.keys(peerConnections).forEach(function (peerID) {\n        var conn = peer.connect(peerID);\n        conn.on('open', function () {\n          /*********************               \n              (STOP SHARE) share screen data\n          *************************/\n          var data = {\n            'id': peerID,\n            'sharedScreen': false\n          };\n          conn.send(data);\n        });\n      });\n    }; //socket.emit(\"userShare\", roomID, sharedScreen);\n\n  });\n}\n\naudioInputSelect.onchange = restart;\naudioOutputSelect.onchange = changeAudioDestination;\nvideoSelect.onchange = restart;\npeer.on('connection', function (conn) {\n  conn.on('data', function (data) {\n    console.log(\"peer connected\", data);\n  });\n  conn.on('close', function () {//alert(\"close\")\n  });\n});\npeer.on('open', function (id) {\n  console.log(\"my peer id\" + id);\n  console.log(\"my user \", user);\n  console.log(\"my room id \", roomID);\n  myId = id;\n  data = {\n    'id': id,\n    'user': user,\n    'roomID': roomID\n  };\n  socket.emit(\"newUser\", data); //start a video with audio connection width data of user\n\n  var video = true;\n  var audio = true; //start the my own video camera\n\n  start(video, audio, data);\n});\npeer.on('call', function (call) {\n  var ctr = 0;\n  console.log(\"PEER:: CALLING... for a video stream or audio stream ...\");\n\n  if (window.stream) {\n    window.stream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n    if (stream.getAudioTracks().length == 1 && stream.getVideoTracks().length == 1) {//alert(\"stream from sender is a video 1\")\n    } else {//alert(\"stream from sender is a audio 2\")\n    }\n\n    call.answer(stream);\n    call.on('stream', function (userStream) {\n      console.log(\"recieve video from initiator\");\n\n      if (ctr == 0) {\n        if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n          //alert(\"reciever from sender is a video 5 :: (peer)\" + call.peer)\n          removeElementByID(call.peer);\n          callerElement = document.createElement('video');\n          callerElement.setAttribute(\"id\", call.peer);\n          callerElement.setAttribute(\"class\", \"peerCallBackVideo\");\n          callerElement.muted = false;\n          addVideo(callerElement, userStream);\n        } else {\n          //alert(\"reciever from sender is a audio 6 :: (peer)\" + call.peer)\n          removeElementByID(call.peer);\n          callerElement = document.createElement('audio');\n          callerElement.setAttribute(\"id\", call.peer);\n          callerElement.setAttribute(\"class\", \"peerCallBackAudio\"); //call peer\n\n          callerElement.setAttribute(\"controls\", \"controls\");\n          callerElement.muted = false;\n          addAudio(callerElement, userStream);\n        }\n      }\n\n      ctr++;\n    });\n    call.on('close', function () {\n      removeElementByID(call.peer);\n      console.log(\"user disconected\");\n    });\n  })[\"catch\"](function (error) {\n    console.log(\"recieve audio from initiator\");\n    var audioSource = audioInputSelect.value;\n    var constraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n      if (stream.getAudioTracks().length == 1 && stream.getVideoTracks().length == 1) {//alert(\"stream from sender is a video 3\")\n      } else {//alert(\"stream from sender is a audio 4\")\n      }\n\n      call.answer(stream);\n      call.on('stream', function (userStream) {\n        if (ctr == 0) {\n          if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n            //alert(\"reciever from sender is a video 7  :: (peer) \" + call.peer)\n            removeElementByID(call.peer);\n            callerElement = document.createElement('video');\n            callerElement.setAttribute(\"id\", call.peer);\n            callerElement.setAttribute(\"class\", \"peerCallBackVideo\");\n            callerElement.muted = false;\n            addVideo(callerElement, userStream);\n          } else {\n            //alert(\"reciever from sender is a audio 8 :: (peer)\" + call.peer)\n            removeElementByID(call.peer);\n            callerElement = document.createElement('audio');\n            callerElement.setAttribute(\"id\", call.peer);\n            callerElement.setAttribute(\"class\", \"peerCallBackAudio\"); //call peer\n\n            callerElement.setAttribute(\"controls\", \"controls\");\n            callerElement.muted = false;\n            addAudio(callerElement, userStream);\n          }\n        }\n\n        ctr++;\n      });\n      call.on('close', function () {\n        removeElementByID(call.peer);\n        console.log(\"user disconected\");\n      });\n    })[\"catch\"](function (error) {//alert(\"I can't send any video r audio to your contact, please check media\")\n    });\n  });\n});\npeer.on('close', function (id) {\n  document.getElementById(id).remove();\n});\nsocket.on('userJoined', function (data) {\n  peerConnections[data.id] = data;\n  console.log(\"user joined ::: calling initiator with just audio and video\", data.id);\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (mediaStream) {\n    console.log(\"user joined ::: calling initiator with just audio and video\", data.id);\n    callback = peer.call(data.id, mediaStream);\n\n    if (callback) {\n      var ctr = 0;\n      callback.on('stream', function (userStream) {\n        if (ctr == 0) {\n          if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n            removeElementByID(data.id);\n            callerElement = document.createElement('video');\n            callerElement.setAttribute(\"id\", data.id);\n            callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n            callerElement.muted = false;\n            addVideo(callerElement, userStream);\n          } else {\n            removeElementByID(data.id);\n            callerElement = document.createElement('audio');\n            callerElement.setAttribute(\"id\", data.id);\n            callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n            callerElement.setAttribute(\"controls\", \"controls\");\n            callerElement.muted = false;\n            addAudio(callerElement, userStream);\n          }\n        }\n\n        ctr++;\n      });\n      callback.on('close', function () {\n        removeElementByID(data.id);\n      });\n      callback.on('error', function (err) {\n        console.log(err);\n      });\n    }\n  })[\"catch\"](function (error) {\n    //I have only audio, send to the audio to my peer\n    console.log(\"user joined:: I have only audio, send to the audio to my peer\", data.id);\n    var audioConstraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    navigator.mediaDevices.getUserMedia(audioConstraints).then(function (mediaCallStream) {\n      if (myVideoStream) {\n        callback = peer.call(data.id, mediaCallStream);\n      } else {\n        data = {\n          'id': myId,\n          'user': user,\n          'roomID': roomID,\n          'videoStream': mediaCallStream\n        };\n        socket.emit(\"changeMedia\", data); //never mind callback, i will call change media\n\n        callback = null;\n      }\n\n      if (callback) {\n        var ctr = 0;\n        callback.on('stream', function (userStream) {\n          if (ctr == 0) {\n            if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n              //removeElementByID(data.id);\n              callerElement = document.createElement('video');\n              callerElement.setAttribute(\"id\", data.id);\n              callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n              callerElement.muted = false;\n              addVideo(callerElement, userStream);\n            } else {\n              removeElementByID(data.id);\n              callerElement = document.createElement('audio');\n              callerElement.setAttribute(\"id\", data.id);\n              callerElement.setAttribute(\"class\", \"user_joined_peer_call_back\");\n              callerElement.setAttribute(\"controls\", \"controls\");\n              callerElement.muted = false;\n              addAudio(callerElement, userStream);\n            }\n          }\n\n          ctr++;\n        });\n        callback.on('close', function () {\n          removeElementByID(data.id);\n        });\n        callback.on('error', function (err) {\n          console.log(err);\n        });\n      }\n    })[\"catch\"](function (error) {\n      //alert(\"Please connect audioinput device and try again\");\n      console.log(error);\n    });\n  });\n  /*\n  let id = data.id;\n  let roomID = data.roomID;\n  let user = data.user;\n   const callback = peer.call(id, myVideoStream);\n   console.log(\"new user joined\", data);\n    if (callback) {\n       let ctr = 0;\n      callback.on('stream', (userStream) => {\n           if (ctr == 1) {\n               removeElementByID(data.id);\n               callerElement = document.createElement('video');\n              callerElement.setAttribute(\"id\", data.id);\n              callerElement.setAttribute(\"class\", \"callerBackVideo\");\n              callerElement.muted = false;\n              addVideo(callerElement, userStream);\n          }\n          ctr++;\n      });\n       callback.on('close', () => {\n          console.log(\"closing! callback video...\")\n          removeElementByID(data.id);\n      });\n       callback.on('error', (err) => {\n          console.log(err);\n      });\n  }\n  */\n});\nsocket.on('mediaChanged', function (data) {\n  //alert(\"media change\");\n  var audioSource = audioInputSelect.value;\n  var videoSource = videoSelect.value;\n  var constraints = {\n    audio: {\n      deviceId: audioSource ? {\n        exact: audioSource\n      } : undefined\n    },\n    video: {\n      deviceId: videoSource ? {\n        exact: videoSource\n      } : undefined\n    }\n  };\n  navigator.mediaDevices.getUserMedia(constraints).then(function (userStream) {\n    console.log(\"mediaChanged: initiator (recieved)\");\n    callback = peer.call(data.id, userStream);\n\n    if (callback) {\n      var ctr = 0;\n      callback.on('stream', function (userStream) {\n        if (ctr == 0) {\n          console.log(\"repipient callback : video stream\");\n\n          if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n            removeElementByID(data.id);\n            callerElement = document.createElement('video');\n            callerElement.setAttribute(\"id\", callback.peer);\n            callerElement.setAttribute(\"class\", \"repipient_video_changed\");\n            callerElement.muted = false;\n            addVideo(callerElement, userStream);\n          } else {\n            removeElementByID(data.id);\n            callerElement = document.createElement('audio');\n            callerElement.setAttribute(\"id\", data.id);\n            callerElement.setAttribute(\"class\", \"repipient_audio_changed\");\n            callerElement.setAttribute(\"controls\", \"controls\");\n            callerElement.muted = false;\n            addAudio(callerElement, userStream);\n          }\n        }\n\n        ctr++;\n      });\n      callback.on('close', function () {\n        removeElementByID(data.id);\n      });\n      callback.on('error', function (err) {\n        console.log(err);\n      });\n      peerConnections[data.id] = callback;\n    }\n  })[\"catch\"](function (error) {\n    var audioConstraints = {\n      audio: {\n        deviceId: audioSource ? {\n          exact: audioSource\n        } : undefined\n      },\n      video: false\n    };\n    navigator.mediaDevices.getUserMedia(audioConstraints).then(function (userStream) {\n      console.log(\"initiator SENT AND AUDIO\");\n      callback = peer.call(data.id, userStream);\n\n      if (callback) {\n        var ctr = 0;\n        callback.on('stream', function (userStream) {\n          console.log(\"this is for the audio, stream of the initiator\");\n\n          if (ctr == 0) {\n            console.log(userStream.getAudioTracks().length);\n            console.log(userStream.getVideoTracks().length);\n\n            if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n              console.log(\"user sent a video\");\n              removeElementByID(callback.peer);\n              callerElement = document.createElement('video');\n              callerElement.setAttribute(\"id\", callback.peer);\n              callerElement.setAttribute(\"class\", \"callerBackVideo\");\n              callerElement.muted = false;\n              addVideo(callerElement, userStream);\n            } else {\n              console.log(\"user sent a AUDIO\");\n              removeElementByID(callback.peer);\n              callerElement = document.createElement('audio');\n              callerElement.setAttribute(\"id\", callback.peer);\n              callerElement.setAttribute(\"class\", \"callbackAudio_media\");\n              callerElement.setAttribute(\"controls\", \"controls\");\n              callerElement.muted = false;\n              addAudio(callerElement, userStream);\n            }\n          }\n\n          ctr++;\n        });\n        callback.on('close', function () {\n          removeElementByID(data.id);\n        });\n        callback.on('error', function (err) {\n          console.log(err);\n        });\n        peerConnections[data.id] = callback;\n      }\n    })[\"catch\"](function (error) {\n      //alert(\"audio only\");\n      console.log(error);\n    });\n  });\n  /*\n  let id = data.id;\n  let roomID = data.roomID;\n  let user = data.user;\n   let callback = null;\n     if (myVideoStream !== null) {\n      callback = peer.call(id, myVideoStream);\n  } else if (myAudioStream !== null) {\n      callback = peer.call(id, myAudioStream);\n  }\n   console.log(\"my video\", myVideoStream);\n  console.log(\"my video\", myAudioStream);\n     if (callback) {\n       let ctr = 0;\n       callback.on('stream', (userStream) => {\n           if (ctr == 0) {\n               console.log(userStream.getAudioTracks().length)\n              console.log(userStream.getVideoTracks().length)\n               if (userStream.getAudioTracks().length == 1 && userStream.getVideoTracks().length == 1) {\n                   console.log(\"user sent a video\")\n                   removeElementByID(data.id);\n                    callerElement = document.createElement('video');\n                  callerElement.setAttribute(\"id\", data.id);\n                  callerElement.setAttribute(\"class\", \"callerBackVideo\");\n                  callerElement.muted = false;\n                   addVideo(callerElement, userStream);\n                } else {\n                   console.log(\"user sent a AUDIO\")\n                   removeElementByID(data.id);\n                    callerElement = document.createElement('audio');\n                  callerElement.setAttribute(\"id\", data.id);\n                  callerElement.setAttribute(\"class\", \"callbackAudio\");\n                  callerElement.setAttribute(\"controls\", \"controls\");\n                  callerElement.muted = false;\n                   addAudio(callerElement, userStream);\n              }\n           }\n            ctr++;\n      });\n       callback.on('close', () => {\n          removeElementByID(data.id);\n      });\n       callback.on('error', (err) => {\n          console.log(err);\n      });\n       peerConnections[data.id] = callback;\n  }\n  */\n});\nsocket.on('userDisconnect', function (id) {\n  console.log(\"userDisconnected\", id);\n  removeElementByID(id);\n\n  if (peerConnections[id]) {\n    peerConnections[id].close();\n  }\n});\ndocument.getElementById(\"btnShareScreen\").addEventListener(\"click\", function () {\n  shareScreen();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvd2ViUlRDLmpzP2MzMGQiXSwibmFtZXMiOlsic29ja2V0IiwiaW8iLCJwZWVyIiwiUGVlciIsImluaXRpYXRvciIsInRyaWNrbGUiLCJteVZpZGVvU3RyZWFtIiwibXlBdWRpb1N0cmVhbSIsInZpZGVvRWxlbWVudCIsImF1ZGlvRWxlbWVudCIsInNoYXJlZFNjcmVlbiIsInBlZXJDb25uZWN0aW9ucyIsIm1lZGlhQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZpZGVvR3JpZCIsImF1ZGlvSW5wdXRTZWxlY3QiLCJxdWVyeVNlbGVjdG9yIiwiYXVkaW9PdXRwdXRTZWxlY3QiLCJ2aWRlb1NlbGVjdCIsInNlbGVjdG9ycyIsImRpc2FibGVkIiwiSFRNTE1lZGlhRWxlbWVudCIsInByb3RvdHlwZSIsImdvdERldmljZXMiLCJkZXZpY2VJbmZvcyIsInZhbHVlcyIsIm1hcCIsInNlbGVjdCIsInZhbHVlIiwiZm9yRWFjaCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImkiLCJsZW5ndGgiLCJkZXZpY2VJbmZvIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImRldmljZUlkIiwia2luZCIsInRleHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiY29uc29sZSIsImxvZyIsInNlbGVjdG9ySW5kZXgiLCJBcnJheSIsInNsaWNlIiwiY2FsbCIsImNoaWxkTm9kZXMiLCJzb21lIiwibiIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImVudW1lcmF0ZURldmljZXMiLCJ0aGVuIiwiaGFuZGxlRXJyb3IiLCJhdHRhY2hTaW5rSWQiLCJlbGVtZW50Iiwic2lua0lkIiwibXV0ZWQiLCJzZXRTaW5rSWQiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIm5hbWUiLCJzZWxlY3RlZEluZGV4Iiwid2FybiIsImNoYW5nZUF1ZGlvRGVzdGluYXRpb24iLCJhdWRpb0Rlc3RpbmF0aW9uIiwiZ290U3RyZWFtIiwic3RyZWFtIiwid2luZG93Iiwic3JjT2JqZWN0IiwidmlkZW8iLCJhdWRpbyIsImRhdGEiLCJteUlkIiwidXNlciIsInJvb21JRCIsInN0YXJ0IiwiYWRkTXlBdWRpbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwiYXBwZW5kIiwiYWRkTXlWaWRlbyIsImFkZEF1ZGlvIiwiYWRkVmlkZW8iLCJhZGRWaWRlb0NvbnRlbnQiLCJjb250YWluZXJJRCIsImNvbnRhaW5lckVsZW1lbnQiLCJzaG93QnlFbGVtZW50SWQiLCJlbGVtZW50SUQiLCJlbCIsInN0eWxlIiwiZGlzcGxheSIsImhpZGVCeUVsZW1lbnRJZCIsInJlbW92ZUVsZW1lbnRCeUlEIiwiaWQiLCJyZW1vdmUiLCJjcmVhdGVVc2VyTWVkaWEiLCJjb25zdHJhaW50cyIsImdldFVzZXJNZWRpYSIsInNldEF0dHJpYnV0ZSIsImRldGVjdERlc2t0b3BTaGFyZWQiLCJlcnIiLCJnZXRUcmFja3MiLCJ0cmFjayIsInN0b3AiLCJhdWRpb1NvdXJjZSIsInZpZGVvU291cmNlIiwiZXhhY3QiLCJ1bmRlZmluZWQiLCJyZXN0YXJ0IiwiZW1pdCIsInN0b3BTaGFyaW5nIiwic2hvd0VsZW1lbnQiLCJyZW1vdmVFbGVtZW50Iiwib24iLCJjb25uIiwiYW5zd2VyIiwidXNlclN0cmVhbSIsInNoYXJlZFZpZCIsImFsZXJ0Iiwic2hhcmVTY3JlZW4iLCJnZXREaXNwbGF5TWVkaWEiLCJPYmplY3QiLCJrZXlzIiwicGVlcklEIiwiY29ubmVjdCIsInNlbmQiLCJzaGFyaW5nU2NyZWVuIiwiZ2V0VmlkZW9UcmFja3MiLCJvbmVuZGVkIiwib25jaGFuZ2UiLCJjdHIiLCJnZXRBdWRpb1RyYWNrcyIsImNhbGxlckVsZW1lbnQiLCJtZWRpYVN0cmVhbSIsImNhbGxiYWNrIiwiYXVkaW9Db25zdHJhaW50cyIsIm1lZGlhQ2FsbFN0cmVhbSIsImNsb3NlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdDQyxDQS9PRDtBQWtQQTlELE1BQU0sQ0FBQ3FILEVBQVAsQ0FBVSxnQkFBVixFQUE0QixVQUFBcEIsRUFBRSxFQUFJO0VBRTlCdEQsT0FBTyxDQUFDQyxHQUFSLENBQVksa0JBQVosRUFBZ0NxRCxFQUFoQztFQUVBRCxpQkFBaUIsQ0FBQ0MsRUFBRCxDQUFqQjs7RUFFQSxJQUFJdEYsZUFBZSxDQUFDc0YsRUFBRCxDQUFuQixFQUF5QjtJQUNyQnRGLGVBQWUsQ0FBQ3NGLEVBQUQsQ0FBZixDQUFvQjRDLEtBQXBCO0VBQ0g7QUFDSixDQVREO0FBYUFoSSxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsZ0JBQXhCLEVBQTBDbUUsZ0JBQTFDLENBQTJELE9BQTNELEVBQW9FLFlBQVc7RUFDM0UwQyxXQUFXO0FBQ2QsQ0FGRCIsImZpbGUiOiIuL3Jlc291cmNlcy9qcy93ZWJSVEMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNSBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cblxuY29uc3Qgc29ja2V0ID0gaW8oJ2h0dHBzOi8vcnRjc2VydmVyLmVzdWNjZXNzLWluYy5jb206NDAwMDInLCB7fSk7XG5cbmNvbnN0IHBlZXIgPSBuZXcgUGVlcih7XG4gICAgaW5pdGlhdG9yOiBmYWxzZSxcbiAgICB0cmlja2xlOiBmYWxzZSxcbn0pO1xuXG4ndXNlIHN0cmljdCc7XG5sZXQgbXlWaWRlb1N0cmVhbTtcbmxldCBteUF1ZGlvU3RyZWFtO1xuXG5sZXQgdmlkZW9FbGVtZW50O1xubGV0IGF1ZGlvRWxlbWVudDtcblxuXG5cbmxldCBzaGFyZWRTY3JlZW4gPSBmYWxzZTtcblxuY29uc3QgcGVlckNvbm5lY3Rpb25zID0ge31cbmxldCBtZWRpYUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1lZGlhQ29udGFpbmVyJyk7XG5cblxuXG5cbmxldCB2aWRlb0dyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW9HcmlkJyk7XG5cbmNvbnN0IGF1ZGlvSW5wdXRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QjYXVkaW9Tb3VyY2UnKTtcbmNvbnN0IGF1ZGlvT3V0cHV0U2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0I2F1ZGlvT3V0cHV0Jyk7XG5jb25zdCB2aWRlb1NlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCN2aWRlb1NvdXJjZScpO1xuY29uc3Qgc2VsZWN0b3JzID0gW2F1ZGlvSW5wdXRTZWxlY3QsIGF1ZGlvT3V0cHV0U2VsZWN0LCB2aWRlb1NlbGVjdF07XG5cbmF1ZGlvT3V0cHV0U2VsZWN0LmRpc2FibGVkID0gISgnc2lua0lkJyBpbiBIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSk7XG5cbmZ1bmN0aW9uIGdvdERldmljZXMoZGV2aWNlSW5mb3MpIHtcbiAgICAvLyBIYW5kbGVzIGJlaW5nIGNhbGxlZCBzZXZlcmFsIHRpbWVzIHRvIHVwZGF0ZSBsYWJlbHMuIFByZXNlcnZlIHZhbHVlcy5cbiAgICBjb25zdCB2YWx1ZXMgPSBzZWxlY3RvcnMubWFwKHNlbGVjdCA9PiBzZWxlY3QudmFsdWUpO1xuICAgIHNlbGVjdG9ycy5mb3JFYWNoKHNlbGVjdCA9PiB7XG4gICAgICAgIHdoaWxlIChzZWxlY3QuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgc2VsZWN0LnJlbW92ZUNoaWxkKHNlbGVjdC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkZXZpY2VJbmZvcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBkZXZpY2VJbmZvID0gZGV2aWNlSW5mb3NbaV07XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICBvcHRpb24udmFsdWUgPSBkZXZpY2VJbmZvLmRldmljZUlkO1xuXG4gICAgICAgIGlmIChkZXZpY2VJbmZvLmtpbmQgPT09ICdhdWRpb2lucHV0Jykge1xuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBkZXZpY2VJbmZvLmxhYmVsIHx8IGBtaWNyb3Bob25lICR7YXVkaW9JbnB1dFNlbGVjdC5sZW5ndGggKyAxfWA7XG4gICAgICAgICAgICBhdWRpb0lucHV0U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoZGV2aWNlSW5mby5raW5kID09PSAnYXVkaW9vdXRwdXQnKSB7XG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGRldmljZUluZm8ubGFiZWwgfHwgYHNwZWFrZXIgJHthdWRpb091dHB1dFNlbGVjdC5sZW5ndGggKyAxfWA7XG4gICAgICAgICAgICBhdWRpb091dHB1dFNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKGRldmljZUluZm8ua2luZCA9PT0gJ3ZpZGVvaW5wdXQnKSB7XG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGRldmljZUluZm8ubGFiZWwgfHwgYGNhbWVyYSAke3ZpZGVvU2VsZWN0Lmxlbmd0aCArIDF9YDtcbiAgICAgICAgICAgIHZpZGVvU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU29tZSBvdGhlciBraW5kIG9mIHNvdXJjZS9kZXZpY2U6ICcsIGRldmljZUluZm8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3QsIHNlbGVjdG9ySW5kZXgpID0+IHtcbiAgICAgICAgaWYgKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHNlbGVjdC5jaGlsZE5vZGVzKS5zb21lKG4gPT4gbi52YWx1ZSA9PT0gdmFsdWVzW3NlbGVjdG9ySW5kZXhdKSkge1xuICAgICAgICAgICAgc2VsZWN0LnZhbHVlID0gdmFsdWVzW3NlbGVjdG9ySW5kZXhdO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbm5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZ290RGV2aWNlcykuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXG4vLyBBdHRhY2ggYXVkaW8gb3V0cHV0IGRldmljZSB0byB2aWRlbyBlbGVtZW50IHVzaW5nIGRldmljZS9zaW5rIElELlxuZnVuY3Rpb24gYXR0YWNoU2lua0lkKGVsZW1lbnQsIHNpbmtJZCkge1xuXG4gICAgLy8obXV0ZSBlbGVtZW50LCBmZWVkYmFjayBpZiBmYWxzZSlcbiAgICBlbGVtZW50Lm11dGVkID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZWxlbWVudC5zaW5rSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGVsZW1lbnQuc2V0U2lua0lkKHNpbmtJZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU3VjY2VzcywgYXVkaW8gb3V0cHV0IGRldmljZSBhdHRhY2hlZDogJHtzaW5rSWR9YCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdTZWN1cml0eUVycm9yJykge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgWW91IG5lZWQgdG8gdXNlIEhUVFBTIGZvciBzZWxlY3RpbmcgYXVkaW8gb3V0cHV0IGRldmljZTogJHtlcnJvcn1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gSnVtcCBiYWNrIHRvIGZpcnN0IG91dHB1dCBkZXZpY2UgaW4gdGhlIGxpc3QgYXMgaXQncyB0aGUgZGVmYXVsdC5cbiAgICAgICAgICAgICAgICBhdWRpb091dHB1dFNlbGVjdC5zZWxlY3RlZEluZGV4ID0gMDtcbiAgICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IG91dHB1dCBkZXZpY2Ugc2VsZWN0aW9uLicpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hhbmdlQXVkaW9EZXN0aW5hdGlvbigpIHtcbiAgICBjb25zdCBhdWRpb0Rlc3RpbmF0aW9uID0gYXVkaW9PdXRwdXRTZWxlY3QudmFsdWU7XG5cblxuICAgIGlmIChteVZpZGVvU3RyZWFtKSB7XG4gICAgICAgIGF0dGFjaFNpbmtJZCh2aWRlb0VsZW1lbnQsIGF1ZGlvRGVzdGluYXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dGFjaFNpbmtJZChhdWRpb0VsZW1lbnQsIGF1ZGlvRGVzdGluYXRpb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ290U3RyZWFtKHN0cmVhbSkge1xuICAgIHdpbmRvdy5zdHJlYW0gPSBzdHJlYW07IC8vIG1ha2Ugc3RyZWFtIGF2YWlsYWJsZSB0byBjb25zb2xlXG4gICAgdmlkZW9FbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcblxuICAgIC8vUmVnaXN0ZXIgdGhlIHZpZGVvIHN0cmVhbSB0byBteSBTdHJlYW1cbiAgICBteVZpZGVvU3RyZWFtID0gc3RyZWFtO1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b24gbGlzdCBpbiBjYXNlIGxhYmVscyBoYXZlIGJlY29tZSBhdmFpbGFibGVcbiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgLy9zdGFydCBhIHZpZGVvIHdpdGggYXVkaW8gY29ubmVjdGlvbiB3aWR0aCBkYXRhIG9mIHVzZXJcbiAgICBsZXQgdmlkZW8gPSBmYWxzZTtcbiAgICBsZXQgYXVkaW8gPSB0cnVlO1xuXG5cbiAgICAvL3N0YXJ0IGF1ZGlvXG4gICAgZGF0YSA9IHtcbiAgICAgICAgJ2lkJzogbXlJZCxcbiAgICAgICAgJ3VzZXInOiB1c2VyLFxuICAgICAgICAncm9vbUlEJzogcm9vbUlEXG4gICAgfVxuICAgIHN0YXJ0KHZpZGVvLCBhdWRpbywgZGF0YSk7XG59XG5cblxuZnVuY3Rpb24gYWRkTXlBdWRpbyhhdWRpbywgc3RyZWFtKSB7XG4gICAgYXVkaW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICBhdWRpby5wbGF5KClcbiAgICB9KVxuICAgIG1lZGlhQ29udGFpbmVyLmFwcGVuZChhdWRpbyk7XG59XG5cblxuZnVuY3Rpb24gYWRkTXlWaWRlbyh2aWRlbywgc3RyZWFtKSB7XG4gICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICB2aWRlby5wbGF5KClcbiAgICB9KVxuICAgIG1lZGlhQ29udGFpbmVyLmFwcGVuZCh2aWRlbyk7XG59XG5cblxuZnVuY3Rpb24gYWRkQXVkaW8oYXVkaW8sIHN0cmVhbSkge1xuICAgIGF1ZGlvLnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgYXVkaW8ucGxheSgpXG4gICAgfSlcbiAgICB2aWRlb0dyaWQuYXBwZW5kKGF1ZGlvKTtcbn1cblxuZnVuY3Rpb24gYWRkVmlkZW8odmlkZW8sIHN0cmVhbSkge1xuICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgdmlkZW8ucGxheSgpXG4gICAgfSlcbiAgICB2aWRlb0dyaWQuYXBwZW5kKHZpZGVvKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRWaWRlb0NvbnRlbnQoY29udGFpbmVySUQsIHZpZGVvLCBzdHJlYW0pIHtcbiAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAgIHZpZGVvLnBsYXkoKVxuICAgIH0pXG5cbiAgICBsZXQgY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklEKTtcbiAgICBpZiAoY29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICBjb250YWluZXJFbGVtZW50LmFwcGVuZCh2aWRlbyk7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHNob3dCeUVsZW1lbnRJZChlbGVtZW50SUQpIHtcbiAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SUQpO1xuICAgIGlmIChlbCkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhpZGVCeUVsZW1lbnRJZChlbGVtZW50SUQpIHtcbiAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SUQpO1xuICAgIGlmIChlbCkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlRWxlbWVudEJ5SUQoaWQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlVXNlck1lZGlhKHZpZGVvLCBhdWRpbywgY29uc3RyYWludHMpIHtcblxuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKChzdHJlYW0pID0+IHtcblxuICAgICAgICByZW1vdmVFbGVtZW50QnlJRChcIm15VmlkZW9cIik7XG4gICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKFwibXlBdWRpb1wiKTtcblxuICAgICAgICBpZiAoYXVkaW8gPT0gdHJ1ZSAmJiB2aWRlbyA9PSB0cnVlKSB7XG4gICAgICAgICAgICBteUF1ZGlvU3RyZWFtID0gbnVsbDtcblxuICAgICAgICAgICAgLy9SZWdpc3RlciB0aGUgdmlkZW8gc3RyZWFtIHRvIG15IFN0cmVhbVxuICAgICAgICAgICAgbXlWaWRlb1N0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgICAgIHdpbmRvdy5zdHJlYW0gPSBzdHJlYW07IC8vIG1ha2Ugc3RyZWFtIGF2YWlsYWJsZSB0byBjb25zb2xlICAgICAgIFxuXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhpcyBpcyBhIHZpZGVvXCIpO1xuXG4gICAgICAgICAgICAvKioqKioqKlxuICAgICAgICAgICAgICAgIChOT1RFOiBUSElTIFNIT1VMRCBCRSBNVVRFRCA9IFRSVUUpIFxuICAgICAgICAgICAgKioqKioqKi9cblxuICAgICAgICAgICAgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm15VmlkZW9cIik7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vdmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGFkZE15VmlkZW8odmlkZW9FbGVtZW50LCBzdHJlYW0pO1xuXG4gICAgICAgICAgICBkZXRlY3REZXNrdG9wU2hhcmVkKHN0cmVhbSk7XG5cblxuICAgICAgICB9IGVsc2Uge1xuXG5cbiAgICAgICAgICAgIC8vUmVnaXN0ZXIgdGhlIHZpZGVvIHN0cmVhbSB0byBteSBTdHJlYW1cbiAgICAgICAgICAgIG15VmlkZW9TdHJlYW0gPSBudWxsO1xuICAgICAgICAgICAgd2luZG93LnN0cmVhbSA9IHN0cmVhbTsgLy8gbWFrZSBzdHJlYW0gYXZhaWxhYmxlIHRvIGNvbnNvbGUgICAgICAgXG5cbiAgICAgICAgICAgIC8vYWRkIHRvIG15IGF1ZGlvIHN0cmVhbVxuICAgICAgICAgICAgbXlBdWRpb1N0cmVhbSA9IHN0cmVhbTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzIGlzIGEgYXVkaW8gb25seVwiKVxuXG4gICAgICAgICAgICAvKioqKioqKlxuICAgICAgICAgICAgICAgIChOT1RFOiBUSElTIFNIT1VMRCBCRSBNVVRFRCA9IFRSVUUpIFxuICAgICAgICAgICAgKioqKioqKi9cbiAgICAgICAgICAgIGF1ZGlvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICBhdWRpb0VsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJteUF1ZGlvXCIpO1xuICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAvL2F1ZGlvRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYXVkaW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgYWRkTXlBdWRpbyhhdWRpb0VsZW1lbnQsIHN0cmVhbSk7XG5cbiAgICAgICAgICAgIGRldGVjdERlc2t0b3BTaGFyZWQoc3RyZWFtKVxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG5cblxuICAgIH0pLnRoZW4oZ290RGV2aWNlcykuY2F0Y2goKGVycikgPT4ge1xuXG4gICAgICAgIGlmICh2aWRlbyA9PSB0cnVlICYmIGF1ZGlvID09IHRydWUpIHtcblxuICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvL2FsZXJ0KFwibm8gbWVkaWEgZGV0ZWN0ZWQsIHBsZWFzZSBjb25uZWN0IGFuZCB0cnkgYWdhaW5cIilcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbn1cblxuZnVuY3Rpb24gc3RhcnQodmlkZW8sIGF1ZGlvLCBkYXRhKSB7XG5cbiAgICBpZiAod2luZG93LnN0cmVhbSkge1xuICAgICAgICB3aW5kb3cuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYXVkaW9Tb3VyY2UgPSBhdWRpb0lucHV0U2VsZWN0LnZhbHVlO1xuICAgIGNvbnN0IHZpZGVvU291cmNlID0gdmlkZW9TZWxlY3QudmFsdWU7XG5cbiAgICBpZiAodmlkZW8gPT0gdHJ1ZSAmJiBhdWRpbyA9PSB0cnVlKSB7XG5cbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3QgdmlkZW8gOiBzdGFydFwiKVxuXG4gICAgICAgIGNyZWF0ZVVzZXJNZWRpYSh2aWRlbywgYXVkaW8sIGNvbnN0cmFpbnRzKVxuXG4gICAgfSBlbHNlIGlmICh2aWRlbyA9PSBmYWxzZSAmJiBhdWRpbyA9PSB0cnVlKSB7XG5cbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB2aWRlbzogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3QgYXVkaW8gOiBzdGFydFwiKVxuICAgICAgICBjcmVhdGVVc2VyTWVkaWEodmlkZW8sIGF1ZGlvLCBjb25zdHJhaW50cylcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy9hbGVydChcIm5vIG1lZGlhIGRldGVjdGVkLCBwbGVhc2UgY29ubmVjdCBhbmQgdHJ5IGFnYWluXCIpXG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIHJlc3RhcnQoKSB7XG5cbiAgICBpZiAod2luZG93LnN0cmVhbSkge1xuICAgICAgICB3aW5kb3cuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgY29uc3QgdmlkZW9Tb3VyY2UgPSB2aWRlb1NlbGVjdC52YWx1ZTtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICB2aWRlbzogeyBkZXZpY2VJZDogdmlkZW9Tb3VyY2UgPyB7IGV4YWN0OiB2aWRlb1NvdXJjZSB9IDogdW5kZWZpbmVkIH1cbiAgICB9O1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKChzdHJlYW0pID0+IHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcInJlc3RhcnRlZFwiKVxuXG5cbiAgICAgICAgd2luZG93LnN0cmVhbSA9IHN0cmVhbTsgLy8gbWFrZSBzdHJlYW0gYXZhaWxhYmxlIHRvIGNvbnNvbGVcbiAgICAgICAgdmlkZW9FbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcblxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiaSBoYXZlIG11dGVkIHRoaXNcIilcbiAgICAgICAgLy92aWRlb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vUmVnaXN0ZXIgdGhlIHZpZGVvIHN0cmVhbSB0byBteSBTdHJlYW1cbiAgICAgICAgbXlWaWRlb1N0cmVhbSA9IHN0cmVhbTtcblxuICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgJ2lkJzogbXlJZCxcbiAgICAgICAgICAgICd1c2VyJzogdXNlcixcbiAgICAgICAgICAgICdyb29tSUQnOiByb29tSUQsXG4gICAgICAgICAgICAndmlkZW9TdHJlYW0nOiBteVZpZGVvU3RyZWFtXG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgc29ja2V0LmVtaXQoXCJjaGFuZ2VNZWRpYVwiLCBkYXRhKTtcblxuICAgICAgICByZW1vdmVFbGVtZW50QnlJRChteUlkKTtcblxuXG4gICAgfSkuY2F0Y2goaGFuZGxlRXJyb3IpO1xuXG59XG5cblxuXG4vL3VzZXIgZW5kIHN0b3Agc2hhcmluZ1xuZnVuY3Rpb24gc3RvcFNoYXJpbmcoKSB7XG5cbiAgICBsZXQgc2hvd0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlc3NvblNsaWRlXCIpO1xuXG4gICAgaWYgKHNob3dFbGVtZW50KSB7XG4gICAgICAgIHNob3dFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIGxldCByZW1vdmVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZWRWaWRlb1wiKTtcblxuICAgIGlmIChyZW1vdmVFbGVtZW50KSB7XG4gICAgICAgIHJlbW92ZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZXRlY3REZXNrdG9wU2hhcmVkKHN0cmVhbSkge1xuXG5cbiAgICBwZWVyLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24oY29ubikge1xuXG4gICAgICAgIGNvbm4ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgIGlmIChkYXRhLnNoYXJlZFNjcmVlbiA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy9AdG90byBwZWVyLnN0cmVhbSB0byB3YWl0IGZvciB0aGVcblxuICAgICAgICAgICAgICAgIHNoYXJlZFNjcmVlbiA9IHRydWU7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zaGFyZWRTY3JlZW4gPT0gZmFsc2UpIHtcblxuICAgICAgICAgICAgICAgIHN0b3BTaGFyaW5nKCk7XG5cbiAgICAgICAgICAgICAgICBzaGFyZWRTY3JlZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG5cbiAgICBwZWVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjbG9zZVwiKVxuICAgIH0pO1xuXG4gICAgcGVlci5vbignY2FsbCcsIGNhbGwgPT4ge1xuXG4gICAgICAgIGlmIChzdHJlYW0gPT0gbnVsbCkge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImFuc3dlciB0aGUgc3RyZWFtIHdpdGhvdXQgYW55IHN0cmVhbVwiLCBjYWxsKVxuICAgICAgICAgICAgY2FsbC5hbnN3ZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbnN3ZXIgdGhlIHN0cmVhbVwiLCBzdHJlYW0pXG5cbiAgICAgICAgICAgIGNhbGwuYW5zd2VyKHN0cmVhbSk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsLm9uKCdzdHJlYW0nLCB1c2VyU3RyZWFtID0+IHtcblxuICAgICAgICAgICAgaWYgKHNoYXJlZFNjcmVlbiA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2hhcmVkVmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICBzaGFyZWRWaWQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzaGFyZWRWaWRlb1wiKTtcblxuXG4gICAgICAgICAgICAgICAgLy90aGUgbGVzc29uIHNoYXJlZCBjb250YWluZXIgbXVzdCBiZSBvbiB0aGUgbWVtYmVyIGxlc3NvbiBzbGlkZXIgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgYWRkVmlkZW9Db250ZW50KCdsZXNzb25TaGFyZWRDb250YWluZXInLCBzaGFyZWRWaWQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgLy9oaWRlIGxlc3NvbiBTbGlkZVxuICAgICAgICAgICAgICAgIGhpZGVCeUVsZW1lbnRJZChcImxlc3NvblNsaWRlXCIpXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsLm9uKCdmaW5pc2gnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2FsbGVkIGZpbmlzaFwiKVxuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgIGFsZXJ0KGVycilcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FsbC5vbihcImNsb3NlXCIsICgpID0+IHtcblxuICAgICAgICAgICAgYWxlcnQoXCJjbG9zZWQgc2hhcmVkXCIpXG4gICAgICAgICAgICBzaGFyZWRWaWQucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9KTtcbn07XG5cblxuXG5cbmZ1bmN0aW9uIHNoYXJlU2NyZWVuKCkge1xuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEoe1xuICAgICAgICB2aWRlbzogdHJ1ZSxcbiAgICAgICAgYXVkaW86IHRydWVcbiAgICB9KS50aGVuKCh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgc2hhcmVkU2NyZWVuID0gdXNlclN0cmVhbTtcblxuICAgICAgICAvL0B0b2RvOiAoaGlkZSBzbGlkZSB0aGVuIHNob3cgdGhlIHVzZXIgc2hhcmVkKVxuICAgICAgICBjb25zdCBzaGFyZWRWaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICBzaGFyZWRWaWQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzaGFyZWRWaWRlb1wiKTtcbiAgICAgICAgc2hhcmVkVmlkLm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy90aGUgbGVzc29uIHNoYXJlZCBjb250YWluZXIgbXVzdCBiZSBvbiB0aGUgbWVtYmVyIGxlc3NvbiBzbGlkZXIgY29tcG9uZW50XG4gICAgICAgIGFkZFZpZGVvQ29udGVudCgnbGVzc29uU2hhcmVkQ29udGFpbmVyJywgc2hhcmVkVmlkLCB1c2VyU3RyZWFtKTtcblxuICAgICAgICAvL2hpZGUgbGVzc29uIFNsaWRlXG4gICAgICAgIGhpZGVCeUVsZW1lbnRJZChcImxlc3NvblNsaWRlXCIpXG5cbiAgICAgICAgY29uc29sZS5sb2cocGVlckNvbm5lY3Rpb25zKVxuXG4gICAgICAgIC8vQ29ubmVjdCB0byBwZWVyc1xuICAgICAgICBPYmplY3Qua2V5cyhwZWVyQ29ubmVjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24ocGVlcklEKSB7XG5cbiAgICAgICAgICAgIC8vY29ubmVjdCBhbmQgc2VuZFxuICAgICAgICAgICAgdmFyIGNvbm4gPSBwZWVyLmNvbm5lY3QocGVlcklEKTtcblxuICAgICAgICAgICAgY29ubi5vbignb3BlbicsICgpID0+IHtcblxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKiogICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgKE5FVykgc2hhcmUgc2NyZWVuIGRhdGFcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiBwZWVySUQsXG4gICAgICAgICAgICAgICAgICAgICdzaGFyZWRTY3JlZW4nOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9hZGQgdG8gdGhlIGNvbm5lY3Rpb24sIGFuZCBzZW5kIHRoZW4gY2FsbFxuICAgICAgICAgICAgICAgIGNvbm4uc2VuZChkYXRhKTtcblxuICAgICAgICAgICAgICAgIGxldCBzaGFyaW5nU2NyZWVuID0gcGVlci5jYWxsKHBlZXJJRCwgc2hhcmVkU2NyZWVuKTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvL1RoZSBzY3JlZW4gcmVjb3JkIGlzIHN0b3BwZWQgYnkgbXlzZWxmXG4gICAgICAgIHNoYXJlZFNjcmVlbi5nZXRWaWRlb1RyYWNrcygpWzBdLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcblxuXG4gICAgICAgICAgICBzaG93QnlFbGVtZW50SWQoXCJsZXNzb25TbGlkZVwiKVxuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJlZFZpZGVvXCIpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAvL3NlbmQgdGhpcyBzaGFyZWQgc2NyZWVuIGZhbHNlIHRvIHN0b3AgcGVlclxuICAgICAgICAgICAgT2JqZWN0LmtleXMocGVlckNvbm5lY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKHBlZXJJRCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbm4gPSBwZWVyLmNvbm5lY3QocGVlcklEKTtcblxuICAgICAgICAgICAgICAgIGNvbm4ub24oJ29wZW4nLCAoKSA9PiB7XG5cblxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAoU1RPUCBTSEFSRSkgc2hhcmUgc2NyZWVuIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IHBlZXJJRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzaGFyZWRTY3JlZW4nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29ubi5zZW5kKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuXG5cblxuXG4gICAgICAgIC8vc29ja2V0LmVtaXQoXCJ1c2VyU2hhcmVcIiwgcm9vbUlELCBzaGFyZWRTY3JlZW4pO1xuXG4gICAgfSk7XG59XG5cbmF1ZGlvSW5wdXRTZWxlY3Qub25jaGFuZ2UgPSByZXN0YXJ0O1xuYXVkaW9PdXRwdXRTZWxlY3Qub25jaGFuZ2UgPSBjaGFuZ2VBdWRpb0Rlc3RpbmF0aW9uO1xudmlkZW9TZWxlY3Qub25jaGFuZ2UgPSByZXN0YXJ0O1xuXG5cblxuXG5wZWVyLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24oY29ubikge1xuICAgIGNvbm4ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicGVlciBjb25uZWN0ZWRcIiwgZGF0YSlcbiAgICB9KTtcbiAgICBjb25uLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgLy9hbGVydChcImNsb3NlXCIpXG4gICAgfSk7XG59KTtcblxucGVlci5vbignb3BlbicsIChpZCkgPT4ge1xuXG4gICAgY29uc29sZS5sb2coXCJteSBwZWVyIGlkXCIgKyBpZClcbiAgICBjb25zb2xlLmxvZyhcIm15IHVzZXIgXCIsIHVzZXIpXG4gICAgY29uc29sZS5sb2coXCJteSByb29tIGlkIFwiLCByb29tSUQpXG5cbiAgICBteUlkID0gaWQ7XG5cbiAgICBkYXRhID0ge1xuICAgICAgICAnaWQnOiBpZCxcbiAgICAgICAgJ3VzZXInOiB1c2VyLFxuICAgICAgICAncm9vbUlEJzogcm9vbUlEXG4gICAgfVxuXG4gICAgc29ja2V0LmVtaXQoXCJuZXdVc2VyXCIsIGRhdGEpO1xuXG4gICAgLy9zdGFydCBhIHZpZGVvIHdpdGggYXVkaW8gY29ubmVjdGlvbiB3aWR0aCBkYXRhIG9mIHVzZXJcbiAgICBsZXQgdmlkZW8gPSB0cnVlO1xuICAgIGxldCBhdWRpbyA9IHRydWU7XG5cbiAgICAvL3N0YXJ0IHRoZSBteSBvd24gdmlkZW8gY2FtZXJhXG5cbiAgICBzdGFydCh2aWRlbywgYXVkaW8sIGRhdGEpXG5cbn0pO1xuXG5cblxucGVlci5vbignY2FsbCcsIGNhbGwgPT4ge1xuXG4gICAgbGV0IGN0ciA9IDA7XG5cbiAgICBjb25zb2xlLmxvZyhcIlBFRVI6OiBDQUxMSU5HLi4uIGZvciBhIHZpZGVvIHN0cmVhbSBvciBhdWRpbyBzdHJlYW0gLi4uXCIpO1xuXG4gICAgaWYgKHdpbmRvdy5zdHJlYW0pIHtcbiAgICAgICAgd2luZG93LnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYXVkaW9Tb3VyY2UgPSBhdWRpb0lucHV0U2VsZWN0LnZhbHVlO1xuICAgIGNvbnN0IHZpZGVvU291cmNlID0gdmlkZW9TZWxlY3QudmFsdWU7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSB7XG4gICAgICAgIGF1ZGlvOiB7IGRldmljZUlkOiBhdWRpb1NvdXJjZSA/IHsgZXhhY3Q6IGF1ZGlvU291cmNlIH0gOiB1bmRlZmluZWQgfSxcbiAgICAgICAgdmlkZW86IHsgZGV2aWNlSWQ6IHZpZGVvU291cmNlID8geyBleGFjdDogdmlkZW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9XG4gICAgfTtcblxuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKChzdHJlYW0pID0+IHtcblxuICAgICAgICBpZiAoc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09IDEgJiYgc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIC8vYWxlcnQoXCJzdHJlYW0gZnJvbSBzZW5kZXIgaXMgYSB2aWRlbyAxXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL2FsZXJ0KFwic3RyZWFtIGZyb20gc2VuZGVyIGlzIGEgYXVkaW8gMlwiKVxuICAgICAgICB9XG5cblxuICAgICAgICBjYWxsLmFuc3dlcihzdHJlYW0pO1xuXG4gICAgICAgIGNhbGwub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVjaWV2ZSB2aWRlbyBmcm9tIGluaXRpYXRvclwiKTtcblxuICAgICAgICAgICAgaWYgKGN0ciA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodXNlclN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PSAxICYmIHVzZXJTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCJyZWNpZXZlciBmcm9tIHNlbmRlciBpcyBhIHZpZGVvIDUgOjogKHBlZXIpXCIgKyBjYWxsLnBlZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBlZXJDYWxsQmFja1ZpZGVvXCIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuXG4gICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCJyZWNpZXZlciBmcm9tIHNlbmRlciBpcyBhIGF1ZGlvIDYgOjogKHBlZXIpXCIgKyBjYWxsLnBlZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBlZXJDYWxsQmFja0F1ZGlvXCIpOyAvL2NhbGwgcGVlclxuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBhZGRBdWRpbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0cisrXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbGwub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoY2FsbC5wZWVyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBkaXNjb25lY3RlZFwiKVxuICAgICAgICB9KTtcblxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVjaWV2ZSBhdWRpbyBmcm9tIGluaXRpYXRvclwiKTtcblxuICAgICAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvSW5wdXRTZWxlY3QudmFsdWU7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgYXVkaW86IHsgZGV2aWNlSWQ6IGF1ZGlvU291cmNlID8geyBleGFjdDogYXVkaW9Tb3VyY2UgfSA6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgdmlkZW86IGZhbHNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKChzdHJlYW0pID0+IHtcblxuICAgICAgICAgICAgaWYgKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PSAxICYmIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAvL2FsZXJ0KFwic3RyZWFtIGZyb20gc2VuZGVyIGlzIGEgdmlkZW8gM1wiKVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy9hbGVydChcInN0cmVhbSBmcm9tIHNlbmRlciBpcyBhIGF1ZGlvIDRcIilcblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGNhbGwuYW5zd2VyKHN0cmVhbSk7XG5cbiAgICAgICAgICAgIGNhbGwub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlclN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PSAxICYmIHVzZXJTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KFwicmVjaWV2ZXIgZnJvbSBzZW5kZXIgaXMgYSB2aWRlbyA3ICA6OiAocGVlcikgXCIgKyBjYWxsLnBlZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGNhbGwucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwZWVyQ2FsbEJhY2tWaWRlb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCJyZWNpZXZlciBmcm9tIHNlbmRlciBpcyBhIGF1ZGlvIDggOjogKHBlZXIpXCIgKyBjYWxsLnBlZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGNhbGwucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbC5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwZWVyQ2FsbEJhY2tBdWRpb1wiKTsgLy9jYWxsIHBlZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udHJvbHNcIiwgXCJjb250cm9sc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQXVkaW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjdHIrK1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNhbGwub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGNhbGwucGVlcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIGRpc2NvbmVjdGVkXCIpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIC8vYWxlcnQoXCJJIGNhbid0IHNlbmQgYW55IHZpZGVvIHIgYXVkaW8gdG8geW91ciBjb250YWN0LCBwbGVhc2UgY2hlY2sgbWVkaWFcIilcbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cblxuXG59KTtcblxucGVlci5vbignY2xvc2UnLCAoaWQpID0+IHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkucmVtb3ZlKCk7XG59KTtcblxuXG5zb2NrZXQub24oJ3VzZXJKb2luZWQnLCAoZGF0YSkgPT4ge1xuXG4gICAgcGVlckNvbm5lY3Rpb25zW2RhdGEuaWRdID0gZGF0YTtcblxuXG4gICAgY29uc29sZS5sb2coXCJ1c2VyIGpvaW5lZCA6OjogY2FsbGluZyBpbml0aWF0b3Igd2l0aCBqdXN0IGF1ZGlvIGFuZCB2aWRlb1wiLCBkYXRhLmlkKTtcblxuICAgIGNvbnN0IGF1ZGlvU291cmNlID0gYXVkaW9JbnB1dFNlbGVjdC52YWx1ZTtcbiAgICBjb25zdCB2aWRlb1NvdXJjZSA9IHZpZGVvU2VsZWN0LnZhbHVlO1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0ge1xuICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgIHZpZGVvOiB7IGRldmljZUlkOiB2aWRlb1NvdXJjZSA/IHsgZXhhY3Q6IHZpZGVvU291cmNlIH0gOiB1bmRlZmluZWQgfVxuICAgIH07XG5cbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbigobWVkaWFTdHJlYW0pID0+IHtcblxuICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgam9pbmVkIDo6OiBjYWxsaW5nIGluaXRpYXRvciB3aXRoIGp1c3QgYXVkaW8gYW5kIHZpZGVvXCIsIGRhdGEuaWQpO1xuXG4gICAgICAgIGNhbGxiYWNrID0gcGVlci5jYWxsKGRhdGEuaWQsIG1lZGlhU3RyZWFtKTtcblxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcblxuICAgICAgICAgICAgbGV0IGN0ciA9IDA7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdzdHJlYW0nLCAodXNlclN0cmVhbSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKGN0ciA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiB1c2VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ1c2VyX2pvaW5lZF9wZWVyX2NhbGxfYmFja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG5cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInVzZXJfam9pbmVkX3BlZXJfY2FsbF9iYWNrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLCBcImNvbnRyb2xzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRBdWRpbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBjdHIrKztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYWxsYmFjay5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2FsbGJhY2sub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cblxuXG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cbiAgICAgICAgLy9JIGhhdmUgb25seSBhdWRpbywgc2VuZCB0byB0aGUgYXVkaW8gdG8gbXkgcGVlclxuICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgam9pbmVkOjogSSBoYXZlIG9ubHkgYXVkaW8sIHNlbmQgdG8gdGhlIGF1ZGlvIHRvIG15IHBlZXJcIiwgZGF0YS5pZCk7XG5cblxuXG4gICAgICAgIGNvbnN0IGF1ZGlvQ29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB2aWRlbzogZmFsc2UsXG4gICAgICAgIH07XG5cbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYXVkaW9Db25zdHJhaW50cykudGhlbigobWVkaWFDYWxsU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChteVZpZGVvU3RyZWFtKSB7XG5cblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gcGVlci5jYWxsKGRhdGEuaWQsIG1lZGlhQ2FsbFN0cmVhbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiBteUlkLFxuICAgICAgICAgICAgICAgICAgICAndXNlcic6IHVzZXIsXG4gICAgICAgICAgICAgICAgICAgICdyb29tSUQnOiByb29tSUQsXG4gICAgICAgICAgICAgICAgICAgICd2aWRlb1N0cmVhbSc6IG1lZGlhQ2FsbFN0cmVhbVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwiY2hhbmdlTWVkaWFcIiwgZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvL25ldmVyIG1pbmQgY2FsbGJhY2ssIGkgd2lsbCBjYWxsIGNoYW5nZSBtZWRpYVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcblxuICAgICAgICAgICAgICAgIGxldCBjdHIgPSAwO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0ciA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09IDEgJiYgdXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidXNlcl9qb2luZWRfcGVlcl9jYWxsX2JhY2tcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidXNlcl9qb2luZWRfcGVlcl9jYWxsX2JhY2tcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLCBcImNvbnRyb2xzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEF1ZGlvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIGN0cisrO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcblxuICAgICAgICAgICAgLy9hbGVydChcIlBsZWFzZSBjb25uZWN0IGF1ZGlvaW5wdXQgZGV2aWNlIGFuZCB0cnkgYWdhaW5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIC8qXG4gICAgbGV0IGlkID0gZGF0YS5pZDtcbiAgICBsZXQgcm9vbUlEID0gZGF0YS5yb29tSUQ7XG4gICAgbGV0IHVzZXIgPSBkYXRhLnVzZXI7XG5cbiAgICBjb25zdCBjYWxsYmFjayA9IHBlZXIuY2FsbChpZCwgbXlWaWRlb1N0cmVhbSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIm5ldyB1c2VyIGpvaW5lZFwiLCBkYXRhKTtcblxuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG5cbiAgICAgICAgbGV0IGN0ciA9IDA7XG4gICAgICAgIGNhbGxiYWNrLm9uKCdzdHJlYW0nLCAodXNlclN0cmVhbSkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoY3RyID09IDEpIHtcblxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FsbGVyQmFja1ZpZGVvXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBhZGRWaWRlbyhjYWxsZXJFbGVtZW50LCB1c2VyU3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0cisrO1xuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsYmFjay5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsb3NpbmchIGNhbGxiYWNrIHZpZGVvLi4uXCIpXG4gICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FsbGJhY2sub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICovXG5cbn0pO1xuXG5cbnNvY2tldC5vbignbWVkaWFDaGFuZ2VkJywgKGRhdGEpID0+IHtcblxuXG4gICAgLy9hbGVydChcIm1lZGlhIGNoYW5nZVwiKTtcblxuICAgIGNvbnN0IGF1ZGlvU291cmNlID0gYXVkaW9JbnB1dFNlbGVjdC52YWx1ZTtcbiAgICBjb25zdCB2aWRlb1NvdXJjZSA9IHZpZGVvU2VsZWN0LnZhbHVlO1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0ge1xuICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgIHZpZGVvOiB7IGRldmljZUlkOiB2aWRlb1NvdXJjZSA/IHsgZXhhY3Q6IHZpZGVvU291cmNlIH0gOiB1bmRlZmluZWQgfVxuICAgIH07XG5cbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbigodXNlclN0cmVhbSkgPT4ge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwibWVkaWFDaGFuZ2VkOiBpbml0aWF0b3IgKHJlY2lldmVkKVwiKVxuXG4gICAgICAgIGNhbGxiYWNrID0gcGVlci5jYWxsKGRhdGEuaWQsIHVzZXJTdHJlYW0pO1xuXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuXG4gICAgICAgICAgICBsZXQgY3RyID0gMDtcblxuICAgICAgICAgICAgY2FsbGJhY2sub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3RyID09IDApIHtcblxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVwaXBpZW50IGNhbGxiYWNrIDogdmlkZW8gc3RyZWFtXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09IDEgJiYgdXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgY2FsbGJhY2sucGVlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicmVwaXBpZW50X3ZpZGVvX2NoYW5nZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFZpZGVvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJyZXBpcGllbnRfYXVkaW9fY2hhbmdlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udHJvbHNcIiwgXCJjb250cm9sc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQXVkaW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgY3RyKys7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2FsbGJhY2sub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uc1tkYXRhLmlkXSA9IGNhbGxiYWNrO1xuICAgICAgICB9XG5cblxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXG4gICAgICAgIGNvbnN0IGF1ZGlvQ29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBhdWRpbzogeyBkZXZpY2VJZDogYXVkaW9Tb3VyY2UgPyB7IGV4YWN0OiBhdWRpb1NvdXJjZSB9IDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB2aWRlbzogZmFsc2UsXG4gICAgICAgIH07XG5cbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYXVkaW9Db25zdHJhaW50cykudGhlbigodXNlclN0cmVhbSkgPT4ge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImluaXRpYXRvciBTRU5UIEFORCBBVURJT1wiKVxuXG4gICAgICAgICAgICBjYWxsYmFjayA9IHBlZXIuY2FsbChkYXRhLmlkLCB1c2VyU3RyZWFtKTtcblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgICAgICBsZXQgY3RyID0gMDtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uKCdzdHJlYW0nLCAodXNlclN0cmVhbSkgPT4ge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzIGlzIGZvciB0aGUgYXVkaW8sIHN0cmVhbSBvZiB0aGUgaW5pdGlhdG9yXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdHIgPT0gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlclN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aClcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiB1c2VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBzZW50IGEgdmlkZW9cIilcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGNhbGxiYWNrLnBlZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjYWxsYmFjay5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FsbGVyQmFja1ZpZGVvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFZpZGVvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgc2VudCBhIEFVRElPXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChjYWxsYmFjay5wZWVyKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjYWxsYmFjay5wZWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FsbGJhY2tBdWRpb19tZWRpYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQXVkaW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgY3RyKys7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjay5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb25zW2RhdGEuaWRdID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcblxuICAgICAgICAgICAgLy9hbGVydChcImF1ZGlvIG9ubHlcIik7XG5cblxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG5cbiAgICAvKlxuICAgIGxldCBpZCA9IGRhdGEuaWQ7XG4gICAgbGV0IHJvb21JRCA9IGRhdGEucm9vbUlEO1xuICAgIGxldCB1c2VyID0gZGF0YS51c2VyO1xuXG4gICAgbGV0IGNhbGxiYWNrID0gbnVsbDtcblxuXG5cbiAgICBpZiAobXlWaWRlb1N0cmVhbSAhPT0gbnVsbCkge1xuICAgICAgICBjYWxsYmFjayA9IHBlZXIuY2FsbChpZCwgbXlWaWRlb1N0cmVhbSk7XG4gICAgfSBlbHNlIGlmIChteUF1ZGlvU3RyZWFtICE9PSBudWxsKSB7XG4gICAgICAgIGNhbGxiYWNrID0gcGVlci5jYWxsKGlkLCBteUF1ZGlvU3RyZWFtKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIm15IHZpZGVvXCIsIG15VmlkZW9TdHJlYW0pO1xuICAgIGNvbnNvbGUubG9nKFwibXkgdmlkZW9cIiwgbXlBdWRpb1N0cmVhbSk7XG5cblxuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG5cbiAgICAgICAgbGV0IGN0ciA9IDA7XG5cbiAgICAgICAgY2FsbGJhY2sub24oJ3N0cmVhbScsICh1c2VyU3RyZWFtKSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChjdHIgPT0gMCkge1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlclN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKVxuXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT0gMSAmJiB1c2VyU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgc2VudCBhIHZpZGVvXCIpXG5cbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEJ5SUQoZGF0YS5pZCk7XG5cblxuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhbGxlckJhY2tWaWRlb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGFkZFZpZGVvKGNhbGxlckVsZW1lbnQsIHVzZXJTdHJlYW0pO1xuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBzZW50IGEgQVVESU9cIilcblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50QnlJRChkYXRhLmlkKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FsbGJhY2tBdWRpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLCBcImNvbnRyb2xzXCIpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJFbGVtZW50Lm11dGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkQXVkaW8oY2FsbGVyRWxlbWVudCwgdXNlclN0cmVhbSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgY3RyKys7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbGxiYWNrLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRCeUlEKGRhdGEuaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjYWxsYmFjay5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBwZWVyQ29ubmVjdGlvbnNbZGF0YS5pZF0gPSBjYWxsYmFjaztcbiAgICB9XG4gICAgKi9cbn0pO1xuXG5cbnNvY2tldC5vbigndXNlckRpc2Nvbm5lY3QnLCBpZCA9PiB7XG5cbiAgICBjb25zb2xlLmxvZyhcInVzZXJEaXNjb25uZWN0ZWRcIiwgaWQpO1xuXG4gICAgcmVtb3ZlRWxlbWVudEJ5SUQoaWQpO1xuXG4gICAgaWYgKHBlZXJDb25uZWN0aW9uc1tpZF0pIHtcbiAgICAgICAgcGVlckNvbm5lY3Rpb25zW2lkXS5jbG9zZSgpO1xuICAgIH1cbn0pO1xuXG5cblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5TaGFyZVNjcmVlblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgc2hhcmVTY3JlZW4oKTtcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./resources/js/webRTC.js\n");

/***/ }),

/***/ 7:
/*!**************************************!*\
  !*** multi ./resources/js/webRTC.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /var/www/html/esi_development/resources/js/webRTC.js */"./resources/js/webRTC.js");


/***/ })

/******/ });